!function(e){"use strict";e.module("Simon",["ngRoute","Common","Projects","Applications"])}(angular),function(e){"use strict";function t(e){e.otherwise({redirectTo:"/"})}e.module("Simon").config(t),t.$inject=["$routeProvider"]}(angular),function(e){"use strict";e.module("Common",["ngRoute"])}(angular),function(e){"use strict";function t(e){e.when("/About",{templateUrl:"App/00_Common/03_Templates/About.html",controller:"About",controllerAs:"vm"}).when("/Settings",{templateUrl:"App/00_Common/03_Templates/Settings.html",controller:"Settings",controllerAs:"vm"})}e.module("Common").config(t),t.$inject=["$routeProvider"]}(angular),function(e){"use strict";e.module("Projects",["ngRoute","Common"])}(angular),function(e){"use strict";function t(e){e.when("/",{templateUrl:"App/01_Projects/03_Templates/Projects.html",controller:"Projects",controllerAs:"vm"}).when("/new-project",{templateUrl:"App/01_Projects/03_Templates/NewProject.html",controller:"NewProject",controllerAs:"vm"}).when("/:ProjectId",{templateUrl:"App/01_Projects/03_Templates/ProjectDetails.html",controller:"ProjectDetails",controllerAs:"vm"}).when("/:ProjectId/edit",{templateUrl:"App/01_Projects/03_Templates/EditProject.html",controller:"EditProject",controllerAs:"vm"})}e.module("Projects").config(t),t.$inject=["$routeProvider"]}(angular),function(e){"use strict";e.module("Applications",["ngRoute","Common","Projects"])}(angular),function(e){"use strict";function t(){function e(e,t,o){(o.ngClick||""===o.href||"#"===o.href)&&t.on("click",function(e){e.preventDefault()})}return{restrict:"E",link:e}}e.module("Common").directive("a",t)}(angular),function(e){"use strict";function t(){var e=this;e.Title=""}e.module("Common").value("PageHeadService",new t)}(angular),function(e){"use strict";function t(){function t(){c.AboutMenu.Class="",c.SettingsMenu.Class=""}function r(t){t.get("/api/PluginPaths").success(function(t){c.Tools=e.fromJson(t)})}function n(t){t.get("/api/User").success(function(t){c.User=e.fromJson(t)})}var c=this;c.AboutMenu=new o("/About","About"),c.SettingsMenu=new o("/Settings","Settings"),c.Tools=void 0,c.User=void 0,c.DeactivateAll=t,c.LoadTools=r,c.LoadUser=n}function o(e,t){function o(){r.IsActive=!0,r.Class="active"}var r=this;r.IsActive=!1,r.Class="",r.Path=e,r.Text=t,r.SetAsActive=o}e.module("Common").value("NavbarService",new t)}(angular),function(e){"use strict";function t(){function e(){c.RootItem=void 0,c.IsVisible=!1}function t(){var e=[];return c.RootItem&&c.RootItem.AddTo(e),e}function r(e,t){c.IsVisible=!0,c.RootItem?(c.RootItem.Class="",c.RootItem.SetNextWith(e,t)):(c.RootItem=new o(e,t),c.RootItem.Class="active")}function n(){c.RootItem&&(c.RootItem.IsLast()?c.Reset():c.RootItem.RemoveLast())}var c=this;c.RootItem=void 0,c.IsVisible=!1,c.Reset=e,c.GetItems=t,c.AddNew=r,c.RemoveLast=n}function o(e,t){function r(e,t){s.Next?e?(s.Next.Class="",s.Next.SetNextWith(e,t)):s.Next.Next||(s.Class="active",s.Next=void 0):(s.Next=new o(e,t),s.Next.Class="active")}function n(e){e.push(s),s.Next&&s.Next.AddTo(e)}function c(){return!s.Next}function i(){s.Next&&(s.Next.IsLast()?(s.Class="active",s.Next=void 0):s.Next.RemoveLast())}var s=this;s.Location=e.path(),s.Text=t,s.Next=void 0,s.Class="",s.SetNextWith=r,s.AddTo=n,s.IsLast=c,s.RemoveLast=i}e.module("Common").value("BreadcrumbService",new t)}(angular),function(e){"use strict";function t(t,o,r){function n(){return t.get("/api/settings").success(function(t){s.Settings=e.fromJson(t)}).error(function(e){s.Error=e})}function c(){return t.post("/api/settings",s.Settings).success(function(){r.UpdateTools(t),o.path("/")}).error(function(e){s.Error=e})}function i(e){var t=s.Settings.indexOf(e);-1!=t&&s.Settings.splice(t,1)}var s=this;s.Settings=[],s.Error=void 0,s.GetSettings=n,s.UpdateSettings=c,s.DeleteSettings=i}e.module("Common").service("SettingsService",t),t.$inject=["$http","$location","NavbarService"]}(angular),function(e){"use strict";function t(e){function t(){e.get("/api/SimonVersion/").success(function(e){o.Version=e.DisplayText})}var o=this;o.Version="",o.GetVersion=t}e.module("Common").service("SimonVersionService",t),t.$inject=["$http"]}(angular),function(e){"use strict";function t(e){var t=this;t.PageHeadService=e}e.module("Common").controller("PageHead",t),t.$inject=["PageHeadService"]}(angular),function(e){"use strict";function t(e,t,o){function r(){t.LoadTools(e),t.LoadUser(e),o.GetVersion()}var n=this;n.NavbarService=t,n.SimonVersionService=o,r()}e.module("Common").controller("Navbar",t),t.$inject=["$http","NavbarService","SimonVersionService"]}(angular),function(e){"use strict";function t(e){var t=this;t.BreadcrumbService=e}e.module("Common").controller("Breadcrumb",t),t.$inject=["BreadcrumbService"]}(angular),function(e){"use strict";function t(e,t,o,r,n){function c(){try{t.Title="Global settings",o.IsVisible=!1,r.DeactivateAll(),r.SettingsMenu.SetAsActive(),n.GetSettings()}catch(e){console.log(e)}}var i=this;i.PageHeadService=t,i.BreadcrumbService=o,i.NavbarService=r,i.SettingsService=n,c()}e.module("Common").controller("Settings",t),t.$inject=["$location","PageHeadService","BreadcrumbService","NavbarService","SettingsService"]}(angular),function(e){"use strict";function t(e,t,o,r){function n(){t.Title="About",o.IsVisible=!1,r.DeactivateAll(),r.AboutMenu.SetAsActive()}var c=this;c.PageHeadService=t,c.BreadcrumbService=o,c.NavbarService=r,n()}e.module("Common").controller("About",t),t.$inject=["$location","PageHeadService","BreadcrumbService","NavbarService"]}(angular),function(e){"use strict";function t(){function e(){}e()}e.module("Common").controller("Footer",t)}(angular),function(e){"use strict";function t(t,o,r){function n(){return t.get("/api/projects").success(function(t){a.Projects=e.fromJson(t)}).error(function(e){a.Error=e})}function c(o){return t.get("/api/projects/"+o).success(function(t){a.SelectedProject=e.fromJson(t)}).error(function(e){a.Error=e})}function i(e){return t.post("/api/projects/",e).success(function(e){r.RemoveLast(),o.path("/"+e.Id)}).error(function(e){a.Error=e})}function s(){return t.post("/api/projects/",a.SelectedProject).success(function(){r.RemoveLast(),o.path("/"+a.SelectedProject.Id)}).error(function(e){a.Error=e})}var a=this;a.Projects=[],a.Error=void 0,a.SelectedProject=void 0,a.GetProjects=n,a.GetProjectDetails=c,a.AddProject=i,a.UpdateProject=s}e.module("Projects").service("ProjectsService",t),t.$inject=["$http","$location","BreadcrumbService"]}(angular),function(e){"use strict";function t(e,t,o,r,n){function c(){t.Title="Home",o.DeactivateAll(),n.GetProjects().success(function(){r.Reset(),r.AddNew(e,t.Title)})}var i=this;i.ProjectsService=n,c()}e.module("Projects").controller("Projects",t),t.$inject=["$location","PageHeadService","NavbarService","BreadcrumbService","ProjectsService"]}(angular),function(e){"use strict";function t(e,t,o,r,n,c){function i(){o.Title="Add New Project",r.DeactivateAll(),n.AddNew(e,o.Title)}var s=this;s.ProjectsService=c,s.NewProjectDetails={Name:"",Description:""},i()}e.module("Projects").controller("NewProject",t),t.$inject=["$location","$routeParams","PageHeadService","NavbarService","BreadcrumbService","ProjectsService"]}(angular),function(e){"use strict";function t(e,t,o,r,n,c){function i(){r.DeactivateAll(),c.GetProjectDetails(t.ProjectId).success(function(){o.Title=c.SelectedProject.Name,n.AddNew(e,o.Title)})}var s=this;s.ProjectsService=c,i()}e.module("Projects").controller("ProjectDetails",t),t.$inject=["$location","$routeParams","PageHeadService","NavbarService","BreadcrumbService","ProjectsService"]}(angular),function(e){"use strict";function t(e,t,o,r,n,c){function i(){r.DeactivateAll(),c.GetProjectDetails(t.ProjectId).success(function(){o.Title="Edit "+c.SelectedProject.Name,n.RemoveLast(),n.AddNew(e,o.Title)})}var s=this;s.ProjectsService=c,i()}e.module("Projects").controller("EditProject",t),t.$inject=["$location","$routeParams","PageHeadService","NavbarService","BreadcrumbService","ProjectsService"]}(angular);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjAwX1NpbW9uLk1vZHVsZS5qcyIsIjAxX1NpbW9uLlJvdXRlcy5qcyIsIjAwX0NvbW1vbi8wMF9Db21tb24uTW9kdWxlLmpzIiwiMDBfQ29tbW9uLzAxX0NvbW1vbi5Sb3V0ZXMuanMiLCIwMV9Qcm9qZWN0cy8wMF9Qcm9qZWN0cy5Nb2R1bGUuanMiLCIwMV9Qcm9qZWN0cy8wMV9Qcm9qZWN0cy5Sb3V0ZXMuanMiLCIwMl9BcHBsaWNhdGlvbnMvMDBfQXBwbGljYXRpb25zLk1vZHVsZS5qcyIsIjAwX0NvbW1vbi8wMF9EaXJlY3RpdmVzLzAxX0FuY2hvci5EaXJlY3RpdmUuanMiLCIwMF9Db21tb24vMDFfU2VydmljZXMvMDFfUGFnZUhlYWQuU2VydmljZS5qcyIsIjAwX0NvbW1vbi8wMV9TZXJ2aWNlcy8wMl9OYXZiYXIuU2VydmljZS5qcyIsIjAwX0NvbW1vbi8wMV9TZXJ2aWNlcy8wM19CcmVhZGNydW1iLlNlcnZpY2UuanMiLCIwMF9Db21tb24vMDFfU2VydmljZXMvMDRfU2V0dGluZ3MuU2VydmljZS5qcyIsIjAwX0NvbW1vbi8wMV9TZXJ2aWNlcy8wNV9TaW1vblZlcnNpb24uU2VydmljZS5qcyIsIjAwX0NvbW1vbi8wMl9Db250cm9sbGVycy8wMV9QYWdlSGVhZC5Db250cm9sbGVyLmpzIiwiMDBfQ29tbW9uLzAyX0NvbnRyb2xsZXJzLzAyX05hdmJhci5Db250cm9sbGVyLmpzIiwiMDBfQ29tbW9uLzAyX0NvbnRyb2xsZXJzLzAzX0JyZWFkY3J1bWIuQ29udHJvbGxlci5qcyIsIjAwX0NvbW1vbi8wMl9Db250cm9sbGVycy8wNF9TZXR0aW5ncy5Db250cm9sbGVyLmpzIiwiMDBfQ29tbW9uLzAyX0NvbnRyb2xsZXJzLzA1X0Fib3V0LkNvbnRyb2xsZXIuanMiLCIwMF9Db21tb24vMDJfQ29udHJvbGxlcnMvMDZfRm9vdGVyLkNvbnRyb2xsZXIuanMiLCIwMV9Qcm9qZWN0cy8wMV9TZXJ2aWNlcy8wMV9Qcm9qZWN0cy5TZXJ2aWNlLmpzIiwiMDFfUHJvamVjdHMvMDJfQ29udHJvbGxlcnMvMDFfUHJvamVjdHMuQ29udHJvbGxlci5qcyIsIjAxX1Byb2plY3RzLzAyX0NvbnRyb2xsZXJzLzAyX05ld1Byb2plY3QuQ29udHJvbGxlci5qcyIsIjAxX1Byb2plY3RzLzAyX0NvbnRyb2xsZXJzLzAzX1Byb2plY3REZXRhaWxzLkNvbnRyb2xsZXIuanMiLCIwMV9Qcm9qZWN0cy8wMl9Db250cm9sbGVycy8wNF9FZGl0UHJvamVjdC5Db250cm9sbGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJDQUFBLFNBQUEsR0FDSSxZQUVBLEdBQUEsT0FBQSxTQUNJLFVBQ0EsU0FDQSxXQUNBLGtCQUVSLFNDVEEsU0FBQSxHQUNJLFlBUUEsU0FBQSxHQUFBLEdBQ0ksRUFBQSxXQUNJLFdBQUEsTUFSUixFQUNJLE9BQUEsU0FDQSxPQUFBLEdBRUosRUFBQSxTQUFBLG1CQU9KLFNDZEEsU0FBQSxHQUNJLFlBRUEsR0FDSSxPQUFBLFVBQUEsYUFDUixTQ0xBLFNBQUEsR0FDSSxZQVFBLFNBQUEsR0FBQSxHQUNJLEVBQUEsS0FBQSxVQUNJLFlBQUEsd0NBQ0EsV0FBQSxRQUNBLGFBQUEsT0FDSixLQUFBLGFBQ0ksWUFBQSwyQ0FDQSxXQUFBLFdBQ0EsYUFBQSxPQWRSLEVBQ0ksT0FBQSxVQUNBLE9BQUEsR0FFSixFQUFBLFNBQUEsbUJBYUosU0NwQkEsU0FBQSxHQUNJLFlBRUEsR0FDSSxPQUFBLFlBQ0ksVUFDQSxZQUVaLFNDUkEsU0FBQSxHQUNJLFlBUUEsU0FBQSxHQUFBLEdBQ0ksRUFBQSxLQUFBLEtBQ0ksWUFBQSw2Q0FDQSxXQUFBLFdBQ0EsYUFBQSxPQUNKLEtBQUEsZ0JBQ0ksWUFBQSwrQ0FDQSxXQUFBLGFBQ0EsYUFBQSxPQUNKLEtBQUEsZUFDSSxZQUFBLG1EQUNBLFdBQUEsaUJBQ0EsYUFBQSxPQUNKLEtBQUEsb0JBQ0ksWUFBQSxnREFDQSxXQUFBLGNBQ0EsYUFBQSxPQXRCUixFQUNJLE9BQUEsWUFDQSxPQUFBLEdBRUosRUFBQSxTQUFBLG1CQXFCSixTQzVCQSxTQUFBLEdBQ0ksWUFFQSxHQUNJLE9BQUEsZ0JBQ0ksVUFDQSxTQUNBLGNBRVosU0NUQSxTQUFBLEdBQ0ksWUFNQSxTQUFBLEtBTUksUUFBQSxHQUFBLEVBQUEsRUFBQSxJQUNJLEVBQUEsU0FBQSxLQUFBLEVBQUEsTUFBQSxNQUFBLEVBQUEsT0FDSSxFQUFBLEdBQUEsUUFBQSxTQUFBLEdBQ0ksRUFBQSxtQkFSWixPQUNJLFNBQUEsSUFDQSxLQUFBLEdBUFIsRUFDSSxPQUFBLFVBQ0EsVUFBQSxJQUFhLElBZ0JyQixTQ3JCQSxTQUFBLEdBQ0ksWUFNQSxTQUFBLEtBRUksR0FBQSxHQUFBLElBRUEsR0FBQSxNQUFBLEdBUkosRUFDSSxPQUFBLFVBQ0EsTUFBQSxrQkFBQSxHQUFBLEtBUVIsU0NiQSxTQUFBLEdBQ0ksWUFNQSxTQUFBLEtBYUksUUFBQSxLQUNJLEVBQUEsVUFBQSxNQUFBLEdBQ0EsRUFBQSxhQUFBLE1BQUEsR0FHSixRQUFBLEdBQUEsR0FDSSxFQUFBLElBQUEsb0JBQUEsUUFBQSxTQUFBLEdBQ0ksRUFBQSxNQUFBLEVBQUEsU0FBQSxLQUlSLFFBQUEsR0FBQSxHQUNJLEVBQUEsSUFBQSxhQUFBLFFBQUEsU0FBQSxHQUNJLEVBQUEsS0FBQSxFQUFBLFNBQUEsS0F4QlIsR0FBQSxHQUFBLElBRUEsR0FBQSxVQUFBLEdBQUEsR0FBQSxTQUFBLFNBQ0EsRUFBQSxhQUFBLEdBQUEsR0FBQSxZQUFBLFlBQ0EsRUFBQSxNQUFBLE9BQ0EsRUFBQSxLQUFBLE9BRUEsRUFBQSxjQUFBLEVBQ0EsRUFBQSxVQUFBLEVBQ0EsRUFBQSxTQUFBLEVBb0JKLFFBQUEsR0FBQSxFQUFBLEdBV0ksUUFBQSxLQUNJLEVBQUEsVUFBQSxFQUNBLEVBQUEsTUFBQSxTQVhKLEdBQUEsR0FBQSxJQUVBLEdBQUEsVUFBQSxFQUNBLEVBQUEsTUFBQSxHQUNBLEVBQUEsS0FBQSxFQUNBLEVBQUEsS0FBQSxFQUVBLEVBQUEsWUFBQSxFQTVDSixFQUNJLE9BQUEsVUFDQSxNQUFBLGdCQUFBLEdBQUEsS0FpRFIsU0N0REEsU0FBQSxHQUNJLFlBTUEsU0FBQSxLQVlJLFFBQUEsS0FDSSxFQUFBLFNBQUEsT0FDQSxFQUFBLFdBQUEsRUFHSixRQUFBLEtBQ0ksR0FBQSxLQUlBLE9BSEEsR0FBQSxVQUNJLEVBQUEsU0FBQSxNQUFBLEdBRUosRUFHSixRQUFBLEdBQUEsRUFBQSxHQUNJLEVBQUEsV0FBQSxFQUNBLEVBQUEsVUFDSSxFQUFBLFNBQUEsTUFBQSxHQUNBLEVBQUEsU0FBQSxZQUFBLEVBQUEsS0FHQSxFQUFBLFNBQUEsR0FBQSxHQUFBLEVBQUEsR0FDQSxFQUFBLFNBQUEsTUFBQSxVQUlSLFFBQUEsS0FDSSxFQUFBLFdBQ0ksRUFBQSxTQUFBLFNBQ0ksRUFBQSxRQUdBLEVBQUEsU0FBQSxjQXpDWixHQUFBLEdBQUEsSUFFQSxHQUFBLFNBQUEsT0FDQSxFQUFBLFdBQUEsRUFFQSxFQUFBLE1BQUEsRUFDQSxFQUFBLFNBQUEsRUFDQSxFQUFBLE9BQUEsRUFDQSxFQUFBLFdBQUEsRUF1Q0osUUFBQSxHQUFBLEVBQUEsR0FjSSxRQUFBLEdBQUEsRUFBQSxHQUNJLEVBQUEsS0FDSSxHQUNJLEVBQUEsS0FBQSxNQUFBLEdBQ0EsRUFBQSxLQUFBLFlBQUEsRUFBQSxJQUVKLEVBQUEsS0FBQSxPQUNJLEVBQUEsTUFBQSxTQUNBLEVBQUEsS0FBQSxTQUlKLEVBQUEsS0FBQSxHQUFBLEdBQUEsRUFBQSxHQUNBLEVBQUEsS0FBQSxNQUFBLFVBSVIsUUFBQSxHQUFBLEdBQ0ksRUFBQSxLQUFBLEdBQ0EsRUFBQSxNQUNJLEVBQUEsS0FBQSxNQUFBLEdBSVIsUUFBQSxLQUNJLE9BQUEsRUFBQSxLQUdKLFFBQUEsS0FDSSxFQUFBLE9BQ0ksRUFBQSxLQUFBLFVBQ0ksRUFBQSxNQUFBLFNBQ0EsRUFBQSxLQUFBLFFBR0EsRUFBQSxLQUFBLGNBL0NaLEdBQUEsR0FBQSxJQUVBLEdBQUEsU0FBQSxFQUFBLE9BQ0EsRUFBQSxLQUFBLEVBQ0EsRUFBQSxLQUFBLE9BQ0EsRUFBQSxNQUFBLEdBRUEsRUFBQSxZQUFBLEVBQ0EsRUFBQSxN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Q0Esb0JBQ0Esb0JBbUJSIiwiZmlsZSI6ImFwcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXIubW9kdWxlKCdTaW1vbicsIFtcclxuICAgICAgICAnbmdSb3V0ZScsXHJcbiAgICAgICAgJ0NvbW1vbicsXHJcbiAgICAgICAgJ1Byb2plY3RzJyxcclxuICAgICAgICAnQXBwbGljYXRpb25zJ1xyXG4gICAgXSk7XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdTaW1vbicpXHJcbiAgICAgICAgLmNvbmZpZyhjb25maWcpO1xyXG5cclxuICAgIGNvbmZpZy4kaW5qZWN0ID0gWyckcm91dGVQcm92aWRlciddO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbmZpZygkcm91dGVQcm92aWRlcikge1xyXG4gICAgICAgICRyb3V0ZVByb3ZpZGVyLm90aGVyd2lzZSh7XHJcbiAgICAgICAgICAgIHJlZGlyZWN0VG86ICcvJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KGFuZ3VsYXIpKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnQ29tbW9uJywgWyduZ1JvdXRlJ10pO1xyXG59KGFuZ3VsYXIpKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnQ29tbW9uJylcclxuICAgICAgICAuY29uZmlnKGNvbmZpZyk7XHJcblxyXG4gICAgY29uZmlnLiRpbmplY3QgPSBbJyRyb3V0ZVByb3ZpZGVyJ107XHJcblxyXG4gICAgZnVuY3Rpb24gY29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHJvdXRlUHJvdmlkZXIud2hlbignL0Fib3V0Jywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ0FwcC8wMF9Db21tb24vMDNfVGVtcGxhdGVzL0Fib3V0Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQWJvdXQnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcclxuICAgICAgICB9KS53aGVuKCcvU2V0dGluZ3MnLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnQXBwLzAwX0NvbW1vbi8wM19UZW1wbGF0ZXMvU2V0dGluZ3MuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdTZXR0aW5ncycsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KGFuZ3VsYXIpKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnUHJvamVjdHMnLCBbXHJcbiAgICAgICAgICAgICduZ1JvdXRlJyxcclxuICAgICAgICAgICAgJ0NvbW1vbidcclxuICAgICAgICBdKTtcclxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ1Byb2plY3RzJylcclxuICAgICAgICAuY29uZmlnKGNvbmZpZyk7XHJcblxyXG4gICAgY29uZmlnLiRpbmplY3QgPSBbJyRyb3V0ZVByb3ZpZGVyJ107XHJcblxyXG4gICAgZnVuY3Rpb24gY29uZmlnKCRyb3V0ZVByb3ZpZGVyKSB7XHJcbiAgICAgICAgJHJvdXRlUHJvdmlkZXIud2hlbignLycsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdBcHAvMDFfUHJvamVjdHMvMDNfVGVtcGxhdGVzL1Byb2plY3RzLmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUHJvamVjdHMnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcclxuICAgICAgICB9KS53aGVuKCcvbmV3LXByb2plY3QnLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnQXBwLzAxX1Byb2plY3RzLzAzX1RlbXBsYXRlcy9OZXdQcm9qZWN0Lmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnTmV3UHJvamVjdCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xyXG4gICAgICAgIH0pLndoZW4oJy86UHJvamVjdElkJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ0FwcC8wMV9Qcm9qZWN0cy8wM19UZW1wbGF0ZXMvUHJvamVjdERldGFpbHMuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdQcm9qZWN0RGV0YWlscycsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xyXG4gICAgICAgIH0pLndoZW4oJy86UHJvamVjdElkL2VkaXQnLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnQXBwLzAxX1Byb2plY3RzLzAzX1RlbXBsYXRlcy9FZGl0UHJvamVjdC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0VkaXRQcm9qZWN0JyxcclxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdBcHBsaWNhdGlvbnMnLCBbXHJcbiAgICAgICAgICAgICduZ1JvdXRlJyxcclxuICAgICAgICAgICAgJ0NvbW1vbicsXHJcbiAgICAgICAgICAgICdQcm9qZWN0cydcclxuICAgICAgICBdKTtcclxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ0NvbW1vbicpXHJcbiAgICAgICAgLmRpcmVjdGl2ZSgnYScsIGFuY2hvcik7XHJcblxyXG4gICAgZnVuY3Rpb24gYW5jaG9yKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHJlc3RyaWN0OiAnRScsXHJcbiAgICAgICAgICAgIGxpbms6IGxpbmtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBsaW5rKHNjb3BlLCBlbGVtLCBhdHRycykge1xyXG4gICAgICAgICAgICBpZiAoYXR0cnMubmdDbGljayB8fCBhdHRycy5ocmVmID09PSAnJyB8fCBhdHRycy5ocmVmID09PSAnIycpIHtcclxuICAgICAgICAgICAgICAgIGVsZW0ub24oJ2NsaWNrJywgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ0NvbW1vbicpXHJcbiAgICAgICAgLnZhbHVlKCdQYWdlSGVhZFNlcnZpY2UnLCBuZXcgUGFnZUhlYWRTZXJ2aWNlKCkpO1xyXG5cclxuICAgIGZ1bmN0aW9uIFBhZ2VIZWFkU2VydmljZSgpIHtcclxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICBzZWxmLlRpdGxlID0gJyc7XHJcbiAgICB9XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdDb21tb24nKVxyXG4gICAgICAgIC52YWx1ZSgnTmF2YmFyU2VydmljZScsIG5ldyBOYXZiYXJTZXJ2aWNlKCkpO1xyXG5cclxuICAgIGZ1bmN0aW9uIE5hdmJhclNlcnZpY2UoKSB7XHJcbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgc2VsZi5BYm91dE1lbnUgPSBuZXcgTmF2YmFyTWVudSgnL0Fib3V0JywgJ0Fib3V0Jyk7XHJcbiAgICAgICAgc2VsZi5TZXR0aW5nc01lbnUgPSBuZXcgTmF2YmFyTWVudSgnL1NldHRpbmdzJywgJ1NldHRpbmdzJyk7XHJcbiAgICAgICAgc2VsZi5Ub29scyA9IHVuZGVmaW5lZDtcclxuICAgICAgICBzZWxmLlVzZXIgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIHNlbGYuRGVhY3RpdmF0ZUFsbCA9IGRlYWN0aXZhdGVBbGw7XHJcbiAgICAgICAgc2VsZi5Mb2FkVG9vbHMgPSBsb2FkVG9vbHM7XHJcbiAgICAgICAgc2VsZi5Mb2FkVXNlciA9IGxvYWRVc2VyO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBkZWFjdGl2YXRlQWxsKCkge1xyXG4gICAgICAgICAgICBzZWxmLkFib3V0TWVudS5DbGFzcyA9ICcnO1xyXG4gICAgICAgICAgICBzZWxmLlNldHRpbmdzTWVudS5DbGFzcyA9ICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbG9hZFRvb2xzKCRodHRwKSB7XHJcbiAgICAgICAgICAgICRodHRwLmdldCgnL2FwaS9QbHVnaW5QYXRocycpLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5Ub29scyA9IGFuZ3VsYXIuZnJvbUpzb24ocmVzdWx0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBsb2FkVXNlcigkaHR0cCkge1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvVXNlcicpLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5Vc2VyID0gYW5ndWxhci5mcm9tSnNvbihyZXN1bHQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gTmF2YmFyTWVudShwYXRoLCB0ZXh0KSB7XHJcbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgc2VsZi5Jc0FjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHNlbGYuQ2xhc3MgPSAnJztcclxuICAgICAgICBzZWxmLlBhdGggPSBwYXRoO1xyXG4gICAgICAgIHNlbGYuVGV4dCA9IHRleHQ7XHJcblxyXG4gICAgICAgIHNlbGYuU2V0QXNBY3RpdmUgPSBzZXRBc0FjdGl2ZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0QXNBY3RpdmUoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuSXNBY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBzZWxmLkNsYXNzID0gJ2FjdGl2ZSc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KGFuZ3VsYXIpKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnQ29tbW9uJylcclxuICAgICAgICAudmFsdWUoJ0JyZWFkY3J1bWJTZXJ2aWNlJywgbmV3IEJyZWFkY3J1bWJTZXJ2aWNlKCkpO1xyXG5cclxuICAgIGZ1bmN0aW9uIEJyZWFkY3J1bWJTZXJ2aWNlKCkge1xyXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIHNlbGYuUm9vdEl0ZW0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgc2VsZi5Jc1Zpc2libGUgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgc2VsZi5SZXNldCA9IHJlc2V0O1xyXG4gICAgICAgIHNlbGYuR2V0SXRlbXMgPSBnZXRJdGVtcztcclxuICAgICAgICBzZWxmLkFkZE5ldyA9IGFkZE5ldztcclxuICAgICAgICBzZWxmLlJlbW92ZUxhc3QgPSByZW1vdmVMYXN0O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZXNldCgpIHtcclxuICAgICAgICAgICAgc2VsZi5Sb290SXRlbSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgc2VsZi5Jc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldEl0ZW1zKCkge1xyXG4gICAgICAgICAgICB2YXIgaXRlbXMgPSBbXTtcclxuICAgICAgICAgICAgaWYgKHNlbGYuUm9vdEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuUm9vdEl0ZW0uQWRkVG8oaXRlbXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBpdGVtcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFkZE5ldygkbG9jYXRpb24sIHRleHQpIHtcclxuICAgICAgICAgICAgc2VsZi5Jc1Zpc2libGUgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5Sb290SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5Sb290SXRlbS5DbGFzcyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5Sb290SXRlbS5TZXROZXh0V2l0aCgkbG9jYXRpb24sIHRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5Sb290SXRlbSA9IG5ldyBCcmVhZGNydW1iSXRlbSgkbG9jYXRpb24sIHRleHQpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5Sb290SXRlbS5DbGFzcyA9ICdhY3RpdmUnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZW1vdmVMYXN0KCkge1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5Sb290SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYuUm9vdEl0ZW0uSXNMYXN0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLlJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLlJvb3RJdGVtLlJlbW92ZUxhc3QoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBCcmVhZGNydW1iSXRlbSgkbG9jYXRpb24sIHRleHQpIHtcclxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICBzZWxmLkxvY2F0aW9uID0gJGxvY2F0aW9uLnBhdGgoKTtcclxuICAgICAgICBzZWxmLlRleHQgPSB0ZXh0O1xyXG4gICAgICAgIHNlbGYuTmV4dCA9IHVuZGVmaW5lZDtcclxuICAgICAgICBzZWxmLkNsYXNzID0gJyc7XHJcblxyXG4gICAgICAgIHNlbGYuU2V0TmV4dFdpdGggPSBzZXROZXh0V2l0aDtcclxuICAgICAgICBzZWxmLkFkZFRvID0gYWRkVG87XHJcbiAgICAgICAgc2VsZi5Jc0xhc3QgPSBpc0xhc3Q7XHJcbiAgICAgICAgc2VsZi5SZW1vdmVMYXN0ID0gcmVtb3ZlTGFzdDtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0TmV4dFdpdGgoJGxvY2F0aW9uLCB0ZXh0KSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLk5leHQpIHtcclxuICAgICAgICAgICAgICAgIGlmICgkbG9jYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLk5leHQuQ2xhc3MgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLk5leHQuU2V0TmV4dFdpdGgoJGxvY2F0aW9uLCB0ZXh0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2UgaWYgKCFzZWxmLk5leHQuTmV4dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuQ2xhc3MgPSAnYWN0aXZlJztcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLk5leHQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLk5leHQgPSBuZXcgQnJlYWRjcnVtYkl0ZW0oJGxvY2F0aW9uLCB0ZXh0KTtcclxuICAgICAgICAgICAgICAgIHNlbGYuTmV4dC5DbGFzcyA9ICdhY3RpdmUnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBhZGRUbyhpdGVtcykge1xyXG4gICAgICAgICAgICBpdGVtcy5wdXNoKHNlbGYpO1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5OZXh0KSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLk5leHQuQWRkVG8oaXRlbXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBpc0xhc3QoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhKHNlbGYuTmV4dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiByZW1vdmVMYXN0KCkge1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5OZXh0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZi5OZXh0LklzTGFzdCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5DbGFzcyA9ICdhY3RpdmUnO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuTmV4dCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuTmV4dC5SZW1vdmVMYXN0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdDb21tb24nKVxyXG4gICAgICAgIC5zZXJ2aWNlKCdTZXR0aW5nc1NlcnZpY2UnLCBzZXR0aW5nc1NlcnZpY2UpO1xyXG5cclxuICAgIHNldHRpbmdzU2VydmljZS4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckaHR0cCcsXHJcbiAgICAgICAgJyRsb2NhdGlvbicsXHJcbiAgICAgICAgJ05hdmJhclNlcnZpY2UnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNldHRpbmdzU2VydmljZSgkaHR0cCwgJGxvY2F0aW9uLCBuYXZiYXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgc2VsZi5TZXR0aW5ncyA9IFtdO1xyXG4gICAgICAgIHNlbGYuRXJyb3IgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgICAgIHNlbGYuR2V0U2V0dGluZ3MgPSBnZXRTZXR0aW5ncztcclxuICAgICAgICBzZWxmLlVwZGF0ZVNldHRpbmdzID0gdXBkYXRlU2V0dGluZ3M7XHJcbiAgICAgICAgc2VsZi5EZWxldGVTZXR0aW5ncyA9IGRlbGV0ZVNldHRpbmdzO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRTZXR0aW5ncygpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9zZXR0aW5ncycpLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5TZXR0aW5ncyA9IGFuZ3VsYXIuZnJvbUpzb24ocmVzdWx0KTtcclxuICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5FcnJvciA9IHJlc3VsdDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiB1cGRhdGVTZXR0aW5ncygpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvc2V0dGluZ3MnLCBzZWxmLlNldHRpbmdzKS5zdWNjZXNzKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIG5hdmJhclNlcnZpY2UuVXBkYXRlVG9vbHMoJGh0dHApO1xyXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcclxuICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5FcnJvciA9IHJlc3VsdDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBkZWxldGVTZXR0aW5ncyhlYWNoU2V0dGluZykge1xyXG4gICAgICAgICAgICB2YXIgaSA9IHNlbGYuU2V0dGluZ3MuaW5kZXhPZihlYWNoU2V0dGluZyk7XHJcbiAgICAgICAgICAgIGlmIChpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLlNldHRpbmdzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ0NvbW1vbicpXHJcbiAgICAgICAgLnNlcnZpY2UoJ1NpbW9uVmVyc2lvblNlcnZpY2UnLCBzaW1vblZlcnNpb25TZXJ2aWNlKTtcclxuXHJcbiAgICBzaW1vblZlcnNpb25TZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJ107XHJcblxyXG4gICAgZnVuY3Rpb24gc2ltb25WZXJzaW9uU2VydmljZSgkaHR0cCkge1xyXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIHNlbGYuVmVyc2lvbiA9ICcnO1xyXG5cclxuICAgICAgICBzZWxmLkdldFZlcnNpb24gPSBnZXRWZXJzaW9uO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRWZXJzaW9uKCkge1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvU2ltb25WZXJzaW9uLycpLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5WZXJzaW9uID0gcmVzdWx0LkRpc3BsYXlUZXh0O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdDb21tb24nKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdQYWdlSGVhZCcsIHBhZ2VIZWFkKTtcclxuXHJcbiAgICBwYWdlSGVhZC4kaW5qZWN0ID0gWydQYWdlSGVhZFNlcnZpY2UnXTtcclxuXHJcbiAgICBmdW5jdGlvbiBwYWdlSGVhZChwYWdlSGVhZFNlcnZpY2UpIHtcclxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICB2bS5QYWdlSGVhZFNlcnZpY2UgPSBwYWdlSGVhZFNlcnZpY2U7XHJcbiAgICB9XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdDb21tb24nKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdOYXZiYXInLCBuYXZiYXIpO1xyXG5cclxuICAgIG5hdmJhci4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckaHR0cCcsXHJcbiAgICAgICAgJ05hdmJhclNlcnZpY2UnLFxyXG4gICAgICAgICdTaW1vblZlcnNpb25TZXJ2aWNlJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBuYXZiYXIoJGh0dHAsIG5hdmJhclNlcnZpY2UsIHNpbW9uVmVyc2lvblNlcnZpY2UpIHtcclxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICB2bS5OYXZiYXJTZXJ2aWNlID0gbmF2YmFyU2VydmljZTtcclxuICAgICAgICB2bS5TaW1vblZlcnNpb25TZXJ2aWNlID0gc2ltb25WZXJzaW9uU2VydmljZTtcclxuXHJcbiAgICAgICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgICAgICAgIG5hdmJhclNlcnZpY2UuTG9hZFRvb2xzKCRodHRwKTtcclxuICAgICAgICAgICAgbmF2YmFyU2VydmljZS5Mb2FkVXNlcigkaHR0cCk7XHJcbiAgICAgICAgICAgIHNpbW9uVmVyc2lvblNlcnZpY2UuR2V0VmVyc2lvbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ0NvbW1vbicpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0JyZWFkY3J1bWInLCBicmVhZGNydW1iKTtcclxuXHJcbiAgICBicmVhZGNydW1iLiRpbmplY3QgPSBbJ0JyZWFkY3J1bWJTZXJ2aWNlJ107XHJcblxyXG4gICAgZnVuY3Rpb24gYnJlYWRjcnVtYihicmVhZGNydW1iU2VydmljZSkge1xyXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLkJyZWFkY3J1bWJTZXJ2aWNlID0gYnJlYWRjcnVtYlNlcnZpY2U7XHJcbiAgICB9XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdDb21tb24nKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdTZXR0aW5ncycsIHNldHRpbmdzKTtcclxuXHJcbiAgICBzZXR0aW5ncy4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckbG9jYXRpb24nLFxyXG4gICAgICAgICdQYWdlSGVhZFNlcnZpY2UnLFxyXG4gICAgICAgICdCcmVhZGNydW1iU2VydmljZScsXHJcbiAgICAgICAgJ05hdmJhclNlcnZpY2UnLFxyXG4gICAgICAgICdTZXR0aW5nc1NlcnZpY2UnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNldHRpbmdzKCRsb2NhdGlvbiwgcGFnZUhlYWRTZXJ2aWNlLCBicmVhZGNydW1iU2VydmljZSwgbmF2YmFyU2VydmljZSwgc2V0dGluZ3NTZXJ2aWNlKSB7XHJcbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgdm0uUGFnZUhlYWRTZXJ2aWNlID0gcGFnZUhlYWRTZXJ2aWNlO1xyXG4gICAgICAgIHZtLkJyZWFkY3J1bWJTZXJ2aWNlID0gYnJlYWRjcnVtYlNlcnZpY2U7XHJcbiAgICAgICAgdm0uTmF2YmFyU2VydmljZSA9IG5hdmJhclNlcnZpY2U7XHJcbiAgICAgICAgdm0uU2V0dGluZ3NTZXJ2aWNlID0gc2V0dGluZ3NTZXJ2aWNlO1xyXG5cclxuICAgICAgICBhY3RpdmF0ZSgpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHBhZ2VIZWFkU2VydmljZS5UaXRsZSA9IFwiR2xvYmFsIHNldHRpbmdzXCI7XHJcbiAgICAgICAgICAgICAgICBicmVhZGNydW1iU2VydmljZS5Jc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIG5hdmJhclNlcnZpY2UuRGVhY3RpdmF0ZUFsbCgpO1xyXG4gICAgICAgICAgICAgICAgbmF2YmFyU2VydmljZS5TZXR0aW5nc01lbnUuU2V0QXNBY3RpdmUoKTtcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzU2VydmljZS5HZXRTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KGFuZ3VsYXIpKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnQ29tbW9uJylcclxuICAgICAgICAuY29udHJvbGxlcignQWJvdXQnLCBhYm91dCk7XHJcblxyXG4gICAgYWJvdXQuJGluamVjdCA9IFtcclxuICAgICAgICAnJGxvY2F0aW9uJyxcclxuICAgICAgICAnUGFnZUhlYWRTZXJ2aWNlJyxcclxuICAgICAgICAnQnJlYWRjcnVtYlNlcnZpY2UnLFxyXG4gICAgICAgICdOYXZiYXJTZXJ2aWNlJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBhYm91dCgkbG9jYXRpb24sIHBhZ2VIZWFkU2VydmljZSwgYnJlYWRjcnVtYlNlcnZpY2UsIG5hdmJhclNlcnZpY2UpIHtcclxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICB2bS5QYWdlSGVhZFNlcnZpY2UgPSBwYWdlSGVhZFNlcnZpY2U7XHJcbiAgICAgICAgdm0uQnJlYWRjcnVtYlNlcnZpY2UgPSBicmVhZGNydW1iU2VydmljZTtcclxuICAgICAgICB2bS5OYXZiYXJTZXJ2aWNlID0gbmF2YmFyU2VydmljZTtcclxuXHJcbiAgICAgICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgICAgICAgIHBhZ2VIZWFkU2VydmljZS5UaXRsZSA9IFwiQWJvdXRcIjtcclxuICAgICAgICAgICAgYnJlYWRjcnVtYlNlcnZpY2UuSXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIG5hdmJhclNlcnZpY2UuRGVhY3RpdmF0ZUFsbCgpO1xyXG4gICAgICAgICAgICBuYXZiYXJTZXJ2aWNlLkFib3V0TWVudS5TZXRBc0FjdGl2ZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ0NvbW1vbicpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0Zvb3RlcicsIGZvb3Rlcik7XHJcblxyXG4gICAgZnVuY3Rpb24gZm9vdGVyKCkge1xyXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG5cclxuICAgICAgICBhY3RpdmF0ZSgpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdQcm9qZWN0cycpXHJcbiAgICAgICAgLnNlcnZpY2UoJ1Byb2plY3RzU2VydmljZScsIHByb2plY3RzU2VydmljZSk7XHJcblxyXG4gICAgcHJvamVjdHNTZXJ2aWNlLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRodHRwJyxcclxuICAgICAgICAnJGxvY2F0aW9uJyxcclxuICAgICAgICAnQnJlYWRjcnVtYlNlcnZpY2UnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIHByb2plY3RzU2VydmljZSgkaHR0cCwgJGxvY2F0aW9uLCBicmVhZGNydW1iU2VydmljZSkge1xyXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIHNlbGYuUHJvamVjdHMgPSBbXTtcclxuICAgICAgICBzZWxmLkVycm9yID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHNlbGYuU2VsZWN0ZWRQcm9qZWN0ID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBzZWxmLkdldFByb2plY3RzID0gZ2V0UHJvamVjdHM7XHJcbiAgICAgICAgc2VsZi5HZXRQcm9qZWN0RGV0YWlscyA9IGdldFByb2plY3REZXRhaWxzO1xyXG4gICAgICAgIHNlbGYuQWRkUHJvamVjdCA9IGFkZFByb2plY3Q7XHJcbiAgICAgICAgc2VsZi5VcGRhdGVQcm9qZWN0ID0gdXBkYXRlUHJvamVjdDtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0UHJvamVjdHMoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcHJvamVjdHMnKS5zdWNjZXNzKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuUHJvamVjdHMgPSBhbmd1bGFyLmZyb21Kc29uKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuRXJyb3IgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0UHJvamVjdERldGFpbHMocHJvamVjdElkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvcHJvamVjdHMvJyArIHByb2plY3RJZCkuc3VjY2VzcyhmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLlNlbGVjdGVkUHJvamVjdCA9IGFuZ3VsYXIuZnJvbUpzb24ocmVzdWx0KTtcclxuICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5FcnJvciA9IHJlc3VsdDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBhZGRQcm9qZWN0KG5ld1Byb2plY3REZXRhaWxzKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Byb2plY3RzLycsIG5ld1Byb2plY3REZXRhaWxzKS5zdWNjZXNzKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGJyZWFkY3J1bWJTZXJ2aWNlLlJlbW92ZUxhc3QoKTtcclxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyArIHJlc3VsdC5JZCk7XHJcbiAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuRXJyb3IgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gdXBkYXRlUHJvamVjdCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoJy9hcGkvcHJvamVjdHMvJywgc2VsZi5TZWxlY3RlZFByb2plY3QpLnN1Y2Nlc3MoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgYnJlYWRjcnVtYlNlcnZpY2UuUmVtb3ZlTGFzdCgpO1xyXG4gICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nICsgc2VsZi5TZWxlY3RlZFByb2plY3QuSWQpO1xyXG4gICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLkVycm9yID0gcmVzdWx0O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdQcm9qZWN0cycpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1Byb2plY3RzJywgcHJvamVjdHMpO1xyXG5cclxuICAgIHByb2plY3RzLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRsb2NhdGlvbicsXHJcbiAgICAgICAgJ1BhZ2VIZWFkU2VydmljZScsXHJcbiAgICAgICAgJ05hdmJhclNlcnZpY2UnLFxyXG4gICAgICAgICdCcmVhZGNydW1iU2VydmljZScsXHJcbiAgICAgICAgJ1Byb2plY3RzU2VydmljZSdcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gcHJvamVjdHMoJGxvY2F0aW9uLCBwYWdlSGVhZFNlcnZpY2UsIG5hdmJhclNlcnZpY2UsIGJyZWFkY3J1bWJTZXJ2aWNlLCBwcm9qZWN0c1NlcnZpY2UpIHtcclxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICB2bS5Qcm9qZWN0c1NlcnZpY2UgPSBwcm9qZWN0c1NlcnZpY2U7XHJcblxyXG4gICAgICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICAgICAgICBwYWdlSGVhZFNlcnZpY2UuVGl0bGUgPSAnSG9tZSc7XHJcbiAgICAgICAgICAgIG5hdmJhclNlcnZpY2UuRGVhY3RpdmF0ZUFsbCgpO1xyXG4gICAgICAgICAgICBwcm9qZWN0c1NlcnZpY2UuR2V0UHJvamVjdHMoKS5zdWNjZXNzKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGJyZWFkY3J1bWJTZXJ2aWNlLlJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICBicmVhZGNydW1iU2VydmljZS5BZGROZXcoJGxvY2F0aW9uLCBwYWdlSGVhZFNlcnZpY2UuVGl0bGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdQcm9qZWN0cycpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ05ld1Byb2plY3QnLCBuZXdQcm9qZWN0KTtcclxuXHJcbiAgICBuZXdQcm9qZWN0LiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRsb2NhdGlvbicsXHJcbiAgICAgICAgJyRyb3V0ZVBhcmFtcycsXHJcbiAgICAgICAgJ1BhZ2VIZWFkU2VydmljZScsXHJcbiAgICAgICAgJ05hdmJhclNlcnZpY2UnLFxyXG4gICAgICAgICdCcmVhZGNydW1iU2VydmljZScsXHJcbiAgICAgICAgJ1Byb2plY3RzU2VydmljZSdcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gbmV3UHJvamVjdCgkbG9jYXRpb24sICRyb3V0ZVBhcmFtcywgcGFnZUhlYWRTZXJ2aWNlLCBuYXZiYXJTZXJ2aWNlLCBicmVhZGNydW1iU2VydmljZSwgcHJvamVjdHNTZXJ2aWNlKSB7XHJcbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgdm0uUHJvamVjdHNTZXJ2aWNlID0gcHJvamVjdHNTZXJ2aWNlO1xyXG4gICAgICAgIHZtLk5ld1Byb2plY3REZXRhaWxzID0ge1xyXG4gICAgICAgICAgICBOYW1lOiAnJyxcclxuICAgICAgICAgICAgRGVzY3JpcHRpb246ICcnXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgICAgICAgIHBhZ2VIZWFkU2VydmljZS5UaXRsZSA9ICdBZGQgTmV3IFByb2plY3QnO1xyXG4gICAgICAgICAgICBuYXZiYXJTZXJ2aWNlLkRlYWN0aXZhdGVBbGwoKTtcclxuICAgICAgICAgICAgYnJlYWRjcnVtYlNlcnZpY2UuQWRkTmV3KCRsb2NhdGlvbiwgcGFnZUhlYWRTZXJ2aWNlLlRpdGxlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdQcm9qZWN0cycpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1Byb2plY3REZXRhaWxzJywgcHJvamVjdERldGFpbHMpO1xyXG5cclxuICAgIHByb2plY3REZXRhaWxzLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRsb2NhdGlvbicsXHJcbiAgICAgICAgJyRyb3V0ZVBhcmFtcycsXHJcbiAgICAgICAgJ1BhZ2VIZWFkU2VydmljZScsXHJcbiAgICAgICAgJ05hdmJhclNlcnZpY2UnLFxyXG4gICAgICAgICdCcmVhZGNydW1iU2VydmljZScsXHJcbiAgICAgICAgJ1Byb2plY3RzU2VydmljZSdcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gcHJvamVjdERldGFpbHMoJGxvY2F0aW9uLCAkcm91dGVQYXJhbXMsIHBhZ2VIZWFkU2VydmljZSwgbmF2YmFyU2VydmljZSwgYnJlYWRjcnVtYlNlcnZpY2UsIHByb2plY3RzU2VydmljZSkge1xyXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLlByb2plY3RzU2VydmljZSA9IHByb2plY3RzU2VydmljZTtcclxuXHJcbiAgICAgICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgICAgICAgIG5hdmJhclNlcnZpY2UuRGVhY3RpdmF0ZUFsbCgpO1xyXG4gICAgICAgICAgICBwcm9qZWN0c1NlcnZpY2UuR2V0UHJvamVjdERldGFpbHMoJHJvdXRlUGFyYW1zLlByb2plY3RJZCkuc3VjY2VzcyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBwYWdlSGVhZFNlcnZpY2UuVGl0bGUgPSBwcm9qZWN0c1NlcnZpY2UuU2VsZWN0ZWRQcm9qZWN0Lk5hbWU7XHJcbiAgICAgICAgICAgICAgICBicmVhZGNydW1iU2VydmljZS5BZGROZXcoJGxvY2F0aW9uLCBwYWdlSGVhZFNlcnZpY2UuVGl0bGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdQcm9qZWN0cycpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0VkaXRQcm9qZWN0JywgZWRpdFByb2plY3QpO1xyXG5cclxuICAgIGVkaXRQcm9qZWN0LiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRsb2NhdGlvbicsXHJcbiAgICAgICAgJyRyb3V0ZVBhcmFtcycsXHJcbiAgICAgICAgJ1BhZ2VIZWFkU2VydmljZScsXHJcbiAgICAgICAgJ05hdmJhclNlcnZpY2UnLFxyXG4gICAgICAgICdCcmVhZGNydW1iU2VydmljZScsXHJcbiAgICAgICAgJ1Byb2plY3RzU2VydmljZSdcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gZWRpdFByb2plY3QoJGxvY2F0aW9uLCAkcm91dGVQYXJhbXMsIHBhZ2VIZWFkU2VydmljZSwgbmF2YmFyU2VydmljZSwgYnJlYWRjcnVtYlNlcnZpY2UsIHByb2plY3RzU2VydmljZSkge1xyXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLlByb2plY3RzU2VydmljZSA9IHByb2plY3RzU2VydmljZTtcclxuXHJcbiAgICAgICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgICAgICAgIG5hdmJhclNlcnZpY2UuRGVhY3RpdmF0ZUFsbCgpO1xyXG4gICAgICAgICAgICBwcm9qZWN0c1NlcnZpY2UuR2V0UHJvamVjdERldGFpbHMoJHJvdXRlUGFyYW1zLlByb2plY3RJZCkuc3VjY2VzcyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBwYWdlSGVhZFNlcnZpY2UuVGl0bGUgPSAnRWRpdCAnICsgcHJvamVjdHNTZXJ2aWNlLlNlbGVjdGVkUHJvamVjdC5OYW1lO1xyXG4gICAgICAgICAgICAgICAgYnJlYWRjcnVtYlNlcnZpY2UuUmVtb3ZlTGFzdCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWRjcnVtYlNlcnZpY2UuQWRkTmV3KCRsb2NhdGlvbiwgcGFnZUhlYWRTZXJ2aWNlLlRpdGxlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KGFuZ3VsYXIpKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=