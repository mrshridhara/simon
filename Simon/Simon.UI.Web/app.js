!function(e){"use strict";e.module("Simon",["ngRoute","Common","Projects","Applications"])}(angular),function(e){"use strict";function t(e){e.otherwise({redirectTo:"/"})}e.module("Simon").config(t),t.$inject=["$routeProvider"]}(angular),function(e){"use strict";e.module("Common",["ngRoute"])}(angular),function(e){"use strict";function t(e){e.when("/About",{templateUrl:"App/00_Common/03_Templates/About.html",controller:"About",controllerAs:"vm"}).when("/Settings",{templateUrl:"App/00_Common/03_Templates/Settings.html",controller:"Settings",controllerAs:"vm"})}e.module("Common").config(t),t.$inject=["$routeProvider"]}(angular),function(e){"use strict";e.module("Projects",["ngRoute","Common"])}(angular),function(e){"use strict";function t(e){e.when("/",{templateUrl:"App/01_Projects/03_Templates/Projects.html",controller:"Projects",controllerAs:"vm"}).when("/new-project",{templateUrl:"App/01_Projects/03_Templates/NewProject.html",controller:"NewProject",controllerAs:"vm"}).when("/:ProjectId",{templateUrl:"App/01_Projects/03_Templates/ProjectDetails.html",controller:"ProjectDetails",controllerAs:"vm"}).when("/:ProjectId/edit",{templateUrl:"App/01_Projects/03_Templates/EditProject.html",controller:"EditProject",controllerAs:"vm"})}e.module("Projects").config(t),t.$inject=["$routeProvider"]}(angular),function(e){"use strict";e.module("Applications",["ngRoute","Common","Projects"])}(angular),function(e){"use strict";function t(e){e.when("/:ProjectId/new-application",{templateUrl:"App/02_Applications/03_Templates/NewApplication.html",controller:"NewApplication",controllerAs:"vm"}).when("/:ProjectId/:ApplicationId",{templateUrl:"App/02_Applications/03_Templates/ApplicationDetails.html",controller:"ApplicationDetails",controllerAs:"vm"}).when("/:ProjectId/:ApplicationId/edit",{templateUrl:"App/02_Applications/03_Templates/EditApplication.html",controller:"EditApplication",controllerAs:"vm"})}e.module("Applications").config(t),t.$inject=["$routeProvider"]}(angular),function(e){"use strict";function t(){function e(e,t,o){(o.ngClick||""===o.href||"#"===o.href)&&t.on("click",function(e){e.preventDefault()})}return{restrict:"E",link:e}}e.module("Common").directive("a",t)}(angular),function(e){"use strict";function t(){var e=this;e.Title=""}e.module("Common").value("PageHeadService",new t)}(angular),function(e){"use strict";function t(){function t(){r.AboutMenu.Class="",r.SettingsMenu.Class=""}function n(t){t.get("/api/PluginPaths").success(function(t){r.Tools=e.fromJson(t)})}function i(t){t.get("/api/User").success(function(t){r.User=e.fromJson(t)})}var r=this;r.AboutMenu=new o("/About","About"),r.SettingsMenu=new o("/Settings","Settings"),r.Tools=void 0,r.User=void 0,r.DeactivateAll=t,r.LoadTools=n,r.LoadUser=i}function o(e,t){function o(){n.IsActive=!0,n.Class="active"}var n=this;n.IsActive=!1,n.Class="",n.Path=e,n.Text=t,n.SetAsActive=o}e.module("Common").value("NavbarService",new t)}(angular),function(e){"use strict";function t(){function e(){c.RootItem=void 0,c.IsVisible=!1}function t(){var e=[];return c.RootItem&&c.RootItem.AddTo(e),e}function n(e,t){c.IsVisible=!0,c.RootItem?(c.RootItem.Class="",c.RootItem.SetNextWith(e,t)):(c.RootItem=new o(e,t),c.RootItem.Class="active")}function i(){c.RootItem&&(c.RootItem.IsLast()?c.Reset():c.RootItem.RemoveLast())}function r(e){return c.RootItem?c.RootItem.LastContains(e):void 0}var c=this;c.RootItem=void 0,c.IsVisible=!1,c.Reset=e,c.GetItems=t,c.AddNew=n,c.RemoveLast=i,c.LastContains=r}function o(e,t){function n(e,t){a.Next?e?(a.Next.Class="",a.Next.SetNextWith(e,t)):a.Next.Next||(a.Class="active",a.Next=void 0):(a.Next=new o(e,t),a.Next.Class="active")}function i(e){e.push(a),a.Next&&a.Next.AddTo(e)}function r(){return!a.Next}function c(){a.Next&&(a.Next.IsLast()?(a.Class="active",a.Next=void 0):a.Next.RemoveLast())}function s(e){return a.IsLast()?a.Text.indexOf(e)>-1:a.Next.LastContains(e)}var a=this;a.Location=e.path(),a.Text=t,a.Next=void 0,a.Class="",a.SetNextWith=n,a.AddTo=i,a.IsLast=r,a.RemoveLast=c,a.LastContains=s}e.module("Common").value("BreadcrumbService",new t)}(angular),function(e){"use strict";function t(t,o,n){function i(){return t.get("/api/Settings").success(function(t){s.Settings=e.fromJson(t),e.forEach(s.Settings,function(e){e.Value.PluginName&&null!==e.Value.PluginName||(s.NonPluginSettings||(onePlugin.Settings=[]),s.NonPluginSettings.push(e))})}).error(function(e){s.Error=e})}function r(){return t.post("/api/Settings",s.Settings).success(function(){n.UpdateTools(t),o.path("/")}).error(function(e){s.Error=e})}function c(e){var t=s.Settings.indexOf(e);-1!=t&&s.Settings.splice(t,1)}var s=this;s.Settings=[],s.GetSettings=i,s.UpdateSettings=r,s.DeleteSettings=c}e.module("Common").service("SettingsService",t),t.$inject=["$http","$location","NavbarService"]}(angular),function(e){"use strict";function t(e){function t(){e.get("/api/SimonVersion/").success(function(e){o.Version=e.DisplayText})}var o=this;o.Version="",o.GetVersion=t}e.module("Common").service("SimonVersionService",t),t.$inject=["$http"]}(angular),function(e){"use strict";function t(t){function o(){return t.get("/api/Plugins").success(function(t){i.Plugins=e.fromJson(t)})}function n(t){e.forEach(i.Plugins,function(e){if(e.Settings){var o=e.Settings.indexOf(t);-1!=o&&e.Settings.splice(o,1)}})}var i=this;i.Plugins=void 0,i.GetPlugins=o,i.DeleteSettings=n}e.module("Common").service("PluginsService",t),t.$inject=["$http"]}(angular),function(e){"use strict";function t(e){var t=this;t.PageHeadService=e}e.module("Common").controller("PageHead",t),t.$inject=["PageHeadService"]}(angular),function(e){"use strict";function t(e,t,o){function n(){t.LoadTools(e),t.LoadUser(e),o.GetVersion()}var i=this;i.NavbarService=t,i.SimonVersionService=o,n()}e.module("Common").controller("Navbar",t),t.$inject=["$http","NavbarService","SimonVersionService"]}(angular),function(e){"use strict";function t(e){var t=this;t.BreadcrumbService=e}e.module("Common").controller("Breadcrumb",t),t.$inject=["BreadcrumbService"]}(angular),function(e){"use strict";function t(t,o,n,i,r,c){function s(){try{o.Title="Global settings",n.IsVisible=!1,i.DeactivateAll(),i.SettingsMenu.SetAsActive(),r.GetSettings().success(function(){u()}).error(function(e){l.Error=e})}catch(e){console.log(e)}}function a(e){r.DeleteSettings(e),c.DeleteSettings(e)}function u(){c.GetPlugins().error(function(e){l.Error=e}).success(function(){e.forEach(c.Plugins,function(t){e.forEach(r.Settings,function(e){t.Name===e.Value.PluginName&&(t.Settings||(t.Settings=[]),t.Settings.push(e))})})})}var l=this;l.Error=void 0,l.PageHeadService=o,l.BreadcrumbService=n,l.NavbarService=i,l.SettingsService=r,l.PluginsService=c,l.DeleteSettings=a,s()}e.module("Common").controller("Settings",t),t.$inject=["$location","PageHeadService","BreadcrumbService","NavbarService","SettingsService","PluginsService"]}(angular),function(e){"use strict";function t(e,t,o,n){function i(){t.Title="About",o.IsVisible=!1,n.DeactivateAll(),n.AboutMenu.SetAsActive()}var r=this;r.PageHeadService=t,r.BreadcrumbService=o,r.NavbarService=n,i()}e.module("Common").controller("About",t),t.$inject=["$location","PageHeadService","BreadcrumbService","NavbarService"]}(angular),function(e){"use strict";function t(){function e(){}e()}e.module("Common").controller("Footer",t)}(angular),function(e){"use strict";function t(t,o,n){function i(){return t.get("/api/projects").success(function(t){a.Projects=e.fromJson(t)}).error(function(e){a.Error=e})}function r(o){return t.get("/api/projects/"+o).success(function(t){a.SelectedProject=e.fromJson(t)}).error(function(e){a.Error=e})}function c(e){return t.post("/api/projects/",e).success(function(e){n.RemoveLast(),o.path("/"+e.Id)}).error(function(e){a.Error=e})}function s(){return t.post("/api/projects/",a.SelectedProject).success(function(){n.RemoveLast(),o.path("/"+a.SelectedProject.Id)}).error(function(e){a.Error=e})}var a=this;a.Projects=[],a.Error=void 0,a.SelectedProject=void 0,a.GetProjects=i,a.GetProjectDetails=r,a.AddProject=c,a.UpdateProject=s}e.module("Projects").service("ProjectsService",t),t.$inject=["$http","$location","BreadcrumbService"]}(angular),function(e){"use strict";function t(e,t,o,n,i){function r(){t.Title="Home",o.DeactivateAll(),i.GetProjects().success(function(){n.Reset(),n.AddNew(e,t.Title)})}var c=this;c.ProjectsService=i,r()}e.module("Projects").controller("Projects",t),t.$inject=["$location","PageHeadService","NavbarService","BreadcrumbService","ProjectsService"]}(angular),function(e){"use strict";function t(e,t,o,n,i,r){function c(){o.Title="Add New Project",n.DeactivateAll(),i.AddNew(e,o.Title)}var s=this;s.ProjectsService=r,s.NewProjectDetails={Name:"",Description:""},c()}e.module("Projects").controller("NewProject",t),t.$inject=["$location","$routeParams","PageHeadService","NavbarService","BreadcrumbService","ProjectsService"]}(angular),function(e){"use strict";function t(e,t,o,n,i,r){function c(){n.DeactivateAll(),r.GetProjectDetails(t.ProjectId).success(function(){o.Title=r.SelectedProject.Name,i.LastContains("Edit ")&&i.RemoveLast(),i.AddNew(e,o.Title)})}var s=this;s.ProjectsService=r,c()}e.module("Projects").controller("ProjectDetails",t),t.$inject=["$location","$routeParams","PageHeadService","NavbarService","BreadcrumbService","ProjectsService"]}(angular),function(e){"use strict";function t(e,t,o,n,i,r){function c(){n.DeactivateAll(),r.GetProjectDetails(t.ProjectId).success(function(){o.Title="Edit "+r.SelectedProject.Name,i.RemoveLast(),i.AddNew(e,o.Title)})}var s=this;s.ProjectsService=r,c()}e.module("Projects").controller("EditProject",t),t.$inject=["$location","$routeParams","PageHeadService","NavbarService","BreadcrumbService","ProjectsService"]}(angular);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIjAwX1NpbW9uLk1vZHVsZS5qcyIsIjAxX1NpbW9uLlJvdXRlcy5qcyIsIjAwX0NvbW1vbi8wMF9Db21tb24uTW9kdWxlLmpzIiwiMDBfQ29tbW9uLzAxX0NvbW1vbi5Sb3V0ZXMuanMiLCIwMV9Qcm9qZWN0cy8wMF9Qcm9qZWN0cy5Nb2R1bGUuanMiLCIwMV9Qcm9qZWN0cy8wMV9Qcm9qZWN0cy5Sb3V0ZXMuanMiLCIwMl9BcHBsaWNhdGlvbnMvMDBfQXBwbGljYXRpb25zLk1vZHVsZS5qcyIsIjAyX0FwcGxpY2F0aW9ucy8wMV9BcHBsaWNhdGlvbnMuUm91dGVzLmpzIiwiMDBfQ29tbW9uLzAwX0RpcmVjdGl2ZXMvMDFfQW5jaG9yLkRpcmVjdGl2ZS5qcyIsIjAwX0NvbW1vbi8wMV9TZXJ2aWNlcy8wMV9QYWdlSGVhZC5TZXJ2aWNlLmpzIiwiMDBfQ29tbW9uLzAxX1NlcnZpY2VzLzAyX05hdmJhci5TZXJ2aWNlLmpzIiwiMDBfQ29tbW9uLzAxX1NlcnZpY2VzLzAzX0JyZWFkY3J1bWIuU2VydmljZS5qcyIsIjAwX0NvbW1vbi8wMV9TZXJ2aWNlcy8wNF9TZXR0aW5ncy5TZXJ2aWNlLmpzIiwiMDBfQ29tbW9uLzAxX1NlcnZpY2VzLzA1X1NpbW9uVmVyc2lvbi5TZXJ2aWNlLmpzIiwiMDBfQ29tbW9uLzAxX1NlcnZpY2VzLzA2X1BsdWdpbnMuU2VydmljZS5qcyIsIjAwX0NvbW1vbi8wMl9Db250cm9sbGVycy8wMV9QYWdlSGVhZC5Db250cm9sbGVyLmpzIiwiMDBfQ29tbW9uLzAyX0NvbnRyb2xsZXJzLzAyX05hdmJhci5Db250cm9sbGVyLmpzIiwiMDBfQ29tbW9uLzAyX0NvbnRyb2xsZXJzLzAzX0JyZWFkY3J1bWIuQ29udHJvbGxlci5qcyIsIjAwX0NvbW1vbi8wMl9Db250cm9sbGVycy8wNF9TZXR0aW5ncy5Db250cm9sbGVyLmpzIiwiMDBfQ29tbW9uLzAyX0NvbnRyb2xsZXJzLzA1X0Fib3V0LkNvbnRyb2xsZXIuanMiLCIwMF9Db21tb24vMDJfQ29udHJvbGxlcnMvMDZfRm9vdGVyLkNvbnRyb2xsZXIuanMiLCIwMV9Qcm9qZWN0cy8wMV9TZXJ2aWNlcy8wMV9Qcm9qZWN0cy5TZXJ2aWNlLmpzIiwiMDFfUHJvamVjdHMvMDJfQ29udHJvbGxlcnMvMDFfUHJvamVjdHMuQ29udHJvbGxlci5qcyIsIjAxX1Byb2plY3RzLzAyX0NvbnRyb2xsZXJzLzAyX05ld1Byb2plY3QuQ29udHJvbGxlci5qcyIsIjAxX1Byb2plY3RzLzAyX0NvbnRyb2xsZXJzLzAzX1Byb2plY3REZXRhaWxzLkNvbnRyb2xsZXIuanMiLCIwMV9Qcm9qZWN0cy8wMl9Db250cm9sbGVycy8wNF9FZGl0UHJvamVjdC5Db250cm9sbGVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJDQUFBLFNBQUEsR0FDSSxZQUVBLEdBQUEsT0FBQSxTQUNJLFVBQ0EsU0FDQSxXQUNBLGtCQUVSLFNDVEEsU0FBQSxHQUNJLFlBUUEsU0FBQSxHQUFBLEdBQ0ksRUFBQSxXQUNJLFdBQUEsTUFSUixFQUNJLE9BQUEsU0FDQSxPQUFBLEdBRUosRUFBQSxTQUFBLG1CQU9KLFNDZEEsU0FBQSxHQUNJLFlBRUEsR0FDSSxPQUFBLFVBQUEsYUFDUixTQ0xBLFNBQUEsR0FDSSxZQVFBLFNBQUEsR0FBQSxHQUNJLEVBQUEsS0FBQSxVQUNJLFlBQUEsd0NBQ0EsV0FBQSxRQUNBLGFBQUEsT0FDSixLQUFBLGFBQ0ksWUFBQSwyQ0FDQSxXQUFBLFdBQ0EsYUFBQSxPQWRSLEVBQ0ksT0FBQSxVQUNBLE9BQUEsR0FFSixFQUFBLFNBQUEsbUJBYUosU0NwQkEsU0FBQSxHQUNJLFlBRUEsR0FDSSxPQUFBLFlBQ0ksVUFDQSxZQUVaLFNDUkEsU0FBQSxHQUNJLFlBUUEsU0FBQSxHQUFBLEdBQ0ksRUFBQSxLQUFBLEtBQ0ksWUFBQSw2Q0FDQSxXQUFBLFdBQ0EsYUFBQSxPQUNKLEtBQUEsZ0JBQ0ksWUFBQSwrQ0FDQSxXQUFBLGFBQ0EsYUFBQSxPQUNKLEtBQUEsZUFDSSxZQUFBLG1EQUNBLFdBQUEsaUJBQ0EsYUFBQSxPQUNKLEtBQUEsb0JBQ0ksWUFBQSxnREFDQSxXQUFBLGNBQ0EsYUFBQSxPQXRCUixFQUNJLE9BQUEsWUFDQSxPQUFBLEdBRUosRUFBQSxTQUFBLG1CQXFCSixTQzVCQSxTQUFBLEdBQ0ksWUFFQSxHQUNJLE9BQUEsZ0JBQ0ksVUFDQSxTQUNBLGNBRVosU0NUQSxTQUFBLEdBQ0ksWUFRQSxTQUFBLEdBQUEsR0FDSSxFQUFBLEtBQUEsK0JBQ0ksWUFBQSx1REFDQSxXQUFBLGlCQUNBLGFBQUEsT0FDSixLQUFBLDhCQUNJLFlBQUEsMkRBQ0EsV0FBQSxxQkFDQSxhQUFBLE9BQ0osS0FBQSxtQ0FDSSxZQUFBLHdEQUNBLFdBQUEsa0JBQ0EsYUFBQSxPQWxCUixFQUNJLE9BQUEsZ0JBQ0EsT0FBQSxHQUVKLEVBQUEsU0FBQSxtQkFpQkosU0N4QkEsU0FBQSxHQUNJLFlBTUEsU0FBQSxLQU1JLFFBQUEsR0FBQSxFQUFBLEVBQUEsSUFDSSxFQUFBLFNBQUEsS0FBQSxFQUFBLE1BQUEsTUFBQSxFQUFBLE9BQ0ksRUFBQSxHQUFBLFFBQUEsU0FBQSxHQUNJLEVBQUEsbUJBUlosT0FDSSxTQUFBLElBQ0EsS0FBQSxHQVBSLEVBQ0ksT0FBQSxVQUNBLFVBQUEsSUFBYSxJQWdCckIsU0NyQkEsU0FBQSxHQUNJLFlBTUEsU0FBQSxLQUVJLEdBQUEsR0FBQSxJQUVBLEdBQUEsTUFBQSxHQVJKLEVBQ0ksT0FBQSxVQUNBLE1BQUEsa0JBQUEsR0FBQSxLQVFSLFNDYkEsU0FBQSxHQUNJLFlBTUEsU0FBQSxLQWFJLFFBQUEsS0FDSSxFQUFBLFVBQUEsTUFBQSxHQUNBLEVBQUEsYUFBQSxNQUFBLEdBR0osUUFBQSxHQUFBLEdBQ0ksRUFBQSxJQUFBLG9CQUFBLFFBQUEsU0FBQSxHQUNJLEVBQUEsTUFBQSxFQUFBLFNBQUEsS0FJUixRQUFBLEdBQUEsR0FDSSxFQUFBLElBQUEsYUFBQSxRQUFBLFNBQUEsR0FDSSxFQUFBLEtBQUEsRUFBQSxTQUFBLEtBeEJSLEdBQUEsR0FBQSxJQUVBLEdBQUEsVUFBQSxHQUFBLEdBQUEsU0FBQSxTQUNBLEVBQUEsYUFBQSxHQUFBLEdBQUEsWUFBQSxZQUNBLEVBQUEsTUFBQSxPQUNBLEVBQUEsS0FBQSxPQUVBLEVBQUEsY0FBQSxFQUNBLEVBQUEsVUFBQSxFQUNBLEVBQUEsU0FBQSxFQW9CSixRQUFBLEdBQUEsRUFBQSxHQVdJLFFBQUEsS0FDSSxFQUFBLFVBQUEsRUFDQSxFQUFBLE1BQUEsU0FYSixHQUFBLEdBQUEsSUFFQSxHQUFBLFVBQUEsRUFDQSxFQUFBLE1BQUEsR0FDQSxFQUFBLEtBQUEsRUFDQSxFQUFBLEtBQUEsRUFFQSxFQUFBLFlBQUEsRUE1Q0osRUFDSSxPQUFBLFVBQ0EsTUFBQSxnQkFBQSxHQUFBLEtBaURSLFNDdERBLFNBQUEsR0FDSSxZQU1BLFNBQUEsS0FhSSxRQUFBLEtBQ0ksRUFBQSxTQUFBLE9BQ0EsRUFBQSxXQUFBLEVBR0osUUFBQSxLQUNJLEdBQUEsS0FJQSxPQUhBLEdBQUEsVUFDSSxFQUFBLFNBQUEsTUFBQSxHQUVKLEVBR0osUUFBQSxHQUFBLEVBQUEsR0FDSSxFQUFBLFdBQUEsRUFDQSxFQUFBLFVBQ0ksRUFBQSxTQUFBLE1BQUEsR0FDQSxFQUFBLFNBQUEsWUFBQSxFQUFBLEtBR0EsRUFBQSxTQUFBLEdBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxTQUFBLE1BQUEsVUFJUixRQUFBLEtBQ0ksRUFBQSxXQUNJLEVBQUEsU0FBQSxTQUNJLEVBQUEsUUFHQSxFQUFBLFNBQUEsY0FLWixRQUFBLEdBQUEsR0FDSSxNQUFBLEdBQUEsU0FDSSxFQUFBLFNBQUEsYUFBQSxHQURKLE9BaERKLEdBQUEsR0FBQSxJQUVBLEdBQUEsU0FBQSxPQUNBLEVBQUEsV0FBQSxFQUVBLEVBQUEsTUFBQSxFQUNBLEVBQUEsU0FBQSxFQUNBLEVBQUEsT0FBQSxFQUNBLEVBQUEsV0FBQSxFQUNBLEVBQUEsYUFBQSxFQTZDSixRQUFBLEdBQUEsRUFBQSxHQWVJLFFBQUEsR0FBQSxFQUFBLEdBQ0ksRUFBQSxLQUNJLEdBQ0ksRUFBQSxLQUFBLE1BQUEsR0FDQSxFQUFBLEtBQUEsWUFBQSxFQUFBLElBRUosRUFBQSxLQUFBLE9BQ0ksRUFBQSxNQUFBLFNBQ0EsRUFBQSxLQUFBLFNBSUosRUFBQSxLQUFBLEdBQUEsR0FBQSxFQUFBLEdBQ0EsRUFBQSxLQUFBLE1BQUEsVUFJUixRQUFBLEdBQUEsR0FDSSxFQUFBLEtBQUEsR0FDQSxFQUFBLE1BQ0ksRUFBQSxLQUFBLE1BQUEsR0FJUixRQUFBLEtBQ0ksT0FBQSxFQUFBLEtBR0osUUFBQSxLQUNJLEVBQUEsT0FDSSxFQUFBLEtBQUEsVUFDSSxFQUFBLE1BQUEsU0FDQSxFQUFBLEtBQUEsUUFHQSxFQUFBLEtBQUEsY0FLWixRQUFBLEdBQUEsR0FDSSxNQUFBLEdBQUEsU0FDSSxFQUFBLEtBQUEsUUFBQSxHQUFBLEdBR0EsRUFBQSxLQUFBLGFBQUEsR0ExRFIsR0FBQSxHQUFBLElBRUEsR0FBQSxTQUFBLEVBQUEsT0FDQSxFQUFBLEtBQUEsRUFDQSxFQUFBLEtBQUEsT0FDQSxFQUFBLE1BQUEsR0FFQSxFQUFBLFlBQUEsRUFDQSxFQUFBLE1BQUEsRUFDQSxFQUFBLE9BQUEsRUFDQSxFQUFBLFdBQUEsRUFDQSxFQUFBLGFBQUEsRUF6RUosRUFDSSxPQUFBLFVBQ0EsTUFBQSxvQkFBQSxHQUFBLEtBMEhSLFNDL0hBLFNBQUEsR0FDSSxZQVlBLFNBQUEsR0FBQSxFQUFBLEVBQUEsR0FVSSxRQUFBLEtBQ0ksTUFBQSxHQUFBLElBQUEsaUJBQUEsUUFBQSxTQUFBLEdBQ0ksRUFBQSxTQUFBLEVBQUEsU0FBQSxHQUNBLEVBQUEsUUFBQSxFQUFBLFNBQUEsU0FBQSxHQUNJLEVBQUEsTUFBQSxZQUFBLE9BQUEsRUFBQSxNQUFBLGFBQ0ksRUFBQSxvQkFDSSxVQUFBLGFBRUosRUFBQSxrQkFBQSxLQUFBLFFBR1osTUFBQSxTQUFBLEdBQ0ksRUFBQSxNQUFBLElBSVIsUUFBQSxLQUNJLE1BQUEsR0FBQSxLQUFBLGdCQUFBLEVBQUEsVUFBQSxRQUFBLFdBQ0ksRUFBQSxZQUFBLEdBQ0EsRUFBQSxLQUFBLE9BQ0osTUFBQSxTQUFBLEdBQ0ksRUFBQSxNQUFB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SUFsQkosRUFDSSxPQUFBLFlBQ0EsV0FBQSxpQkFBMkIsR0FFL0IsRUFBQSxTQUNJLFlBQ0EsZUFDQSxrQkFDQSxnQkFDQSxvQkFDQSxvQkFzQlIsU0NuQ0EsU0FBQSxHQUNJLFlBZUEsU0FBQSxHQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxHQU9JLFFBQUEsS0FDSSxFQUFBLGdCQUNBLEVBQUEsa0JBQUEsRUFBQSxXQUFBLFFBQUEsV0FDSSxFQUFBLE1BQUEsUUFBQSxFQUFBLGdCQUFBLEtBQ0EsRUFBQSxhQUNBLEVBQUEsT0FBQSxFQUFBLEVBQUEsU0FWUixHQUFBLEdBQUEsSUFDQSxHQUFBLGdCQUFBLEVBRUEsSUFsQkosRUFDSSxPQUFBLFlBQ0EsV0FBQSxjQUF3QixHQUU1QixFQUFBLFNBQ0ksWUFDQSxlQUNBLGtCQUNBLGdCQUNBLG9CQUNBLG9CQW1CUiIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyLm1vZHVsZSgnU2ltb24nLCBbXHJcbiAgICAgICAgJ25nUm91dGUnLFxyXG4gICAgICAgICdDb21tb24nLFxyXG4gICAgICAgICdQcm9qZWN0cycsXHJcbiAgICAgICAgJ0FwcGxpY2F0aW9ucydcclxuICAgIF0pO1xyXG59KGFuZ3VsYXIpKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnU2ltb24nKVxyXG4gICAgICAgIC5jb25maWcoY29uZmlnKTtcclxuXHJcbiAgICBjb25maWcuJGluamVjdCA9IFsnJHJvdXRlUHJvdmlkZXInXTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkcm91dGVQcm92aWRlci5vdGhlcndpc2Uoe1xyXG4gICAgICAgICAgICByZWRpcmVjdFRvOiAnLydcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ0NvbW1vbicsIFsnbmdSb3V0ZSddKTtcclxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ0NvbW1vbicpXHJcbiAgICAgICAgLmNvbmZpZyhjb25maWcpO1xyXG5cclxuICAgIGNvbmZpZy4kaW5qZWN0ID0gWyckcm91dGVQcm92aWRlciddO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbmZpZygkcm91dGVQcm92aWRlcikge1xyXG4gICAgICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy9BYm91dCcsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdBcHAvMDBfQ29tbW9uLzAzX1RlbXBsYXRlcy9BYm91dC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0Fib3V0JyxcclxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nXHJcbiAgICAgICAgfSkud2hlbignL1NldHRpbmdzJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ0FwcC8wMF9Db21tb24vMDNfVGVtcGxhdGVzL1NldHRpbmdzLmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnU2V0dGluZ3MnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ1Byb2plY3RzJywgW1xyXG4gICAgICAgICAgICAnbmdSb3V0ZScsXHJcbiAgICAgICAgICAgICdDb21tb24nXHJcbiAgICAgICAgXSk7XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdQcm9qZWN0cycpXHJcbiAgICAgICAgLmNvbmZpZyhjb25maWcpO1xyXG5cclxuICAgIGNvbmZpZy4kaW5qZWN0ID0gWyckcm91dGVQcm92aWRlciddO1xyXG5cclxuICAgIGZ1bmN0aW9uIGNvbmZpZygkcm91dGVQcm92aWRlcikge1xyXG4gICAgICAgICRyb3V0ZVByb3ZpZGVyLndoZW4oJy8nLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnQXBwLzAxX1Byb2plY3RzLzAzX1RlbXBsYXRlcy9Qcm9qZWN0cy5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Byb2plY3RzJyxcclxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nXHJcbiAgICAgICAgfSkud2hlbignL25ldy1wcm9qZWN0Jywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ0FwcC8wMV9Qcm9qZWN0cy8wM19UZW1wbGF0ZXMvTmV3UHJvamVjdC5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ05ld1Byb2plY3QnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcclxuICAgICAgICB9KS53aGVuKCcvOlByb2plY3RJZCcsIHtcclxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdBcHAvMDFfUHJvamVjdHMvMDNfVGVtcGxhdGVzL1Byb2plY3REZXRhaWxzLmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUHJvamVjdERldGFpbHMnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bSdcclxuICAgICAgICB9KS53aGVuKCcvOlByb2plY3RJZC9lZGl0Jywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ0FwcC8wMV9Qcm9qZWN0cy8wM19UZW1wbGF0ZXMvRWRpdFByb2plY3QuaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdFZGl0UHJvamVjdCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KGFuZ3VsYXIpKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnQXBwbGljYXRpb25zJywgW1xyXG4gICAgICAgICAgICAnbmdSb3V0ZScsXHJcbiAgICAgICAgICAgICdDb21tb24nLFxyXG4gICAgICAgICAgICAnUHJvamVjdHMnXHJcbiAgICAgICAgXSk7XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdBcHBsaWNhdGlvbnMnKVxyXG4gICAgICAgIC5jb25maWcoY29uZmlnKTtcclxuXHJcbiAgICBjb25maWcuJGluamVjdCA9IFsnJHJvdXRlUHJvdmlkZXInXTtcclxuXHJcbiAgICBmdW5jdGlvbiBjb25maWcoJHJvdXRlUHJvdmlkZXIpIHtcclxuICAgICAgICAkcm91dGVQcm92aWRlci53aGVuKCcvOlByb2plY3RJZC9uZXctYXBwbGljYXRpb24nLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnQXBwLzAyX0FwcGxpY2F0aW9ucy8wM19UZW1wbGF0ZXMvTmV3QXBwbGljYXRpb24uaHRtbCcsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdOZXdBcHBsaWNhdGlvbicsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xyXG4gICAgICAgIH0pLndoZW4oJy86UHJvamVjdElkLzpBcHBsaWNhdGlvbklkJywge1xyXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ0FwcC8wMl9BcHBsaWNhdGlvbnMvMDNfVGVtcGxhdGVzL0FwcGxpY2F0aW9uRGV0YWlscy5odG1sJyxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogJ0FwcGxpY2F0aW9uRGV0YWlscycsXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJ1xyXG4gICAgICAgIH0pLndoZW4oJy86UHJvamVjdElkLzpBcHBsaWNhdGlvbklkL2VkaXQnLCB7XHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnQXBwLzAyX0FwcGxpY2F0aW9ucy8wM19UZW1wbGF0ZXMvRWRpdEFwcGxpY2F0aW9uLmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnRWRpdEFwcGxpY2F0aW9uJyxcclxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdDb21tb24nKVxyXG4gICAgICAgIC5kaXJlY3RpdmUoJ2EnLCBhbmNob3IpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGFuY2hvcigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZXN0cmljdDogJ0UnLFxyXG4gICAgICAgICAgICBsaW5rOiBsaW5rXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbGluayhzY29wZSwgZWxlbSwgYXR0cnMpIHtcclxuICAgICAgICAgICAgaWYgKGF0dHJzLm5nQ2xpY2sgfHwgYXR0cnMuaHJlZiA9PT0gJycgfHwgYXR0cnMuaHJlZiA9PT0gJyMnKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdDb21tb24nKVxyXG4gICAgICAgIC52YWx1ZSgnUGFnZUhlYWRTZXJ2aWNlJywgbmV3IFBhZ2VIZWFkU2VydmljZSgpKTtcclxuXHJcbiAgICBmdW5jdGlvbiBQYWdlSGVhZFNlcnZpY2UoKSB7XHJcbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgc2VsZi5UaXRsZSA9ICcnO1xyXG4gICAgfVxyXG59KGFuZ3VsYXIpKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnQ29tbW9uJylcclxuICAgICAgICAudmFsdWUoJ05hdmJhclNlcnZpY2UnLCBuZXcgTmF2YmFyU2VydmljZSgpKTtcclxuXHJcbiAgICBmdW5jdGlvbiBOYXZiYXJTZXJ2aWNlKCkge1xyXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIHNlbGYuQWJvdXRNZW51ID0gbmV3IE5hdmJhck1lbnUoJy9BYm91dCcsICdBYm91dCcpO1xyXG4gICAgICAgIHNlbGYuU2V0dGluZ3NNZW51ID0gbmV3IE5hdmJhck1lbnUoJy9TZXR0aW5ncycsICdTZXR0aW5ncycpO1xyXG4gICAgICAgIHNlbGYuVG9vbHMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgc2VsZi5Vc2VyID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBzZWxmLkRlYWN0aXZhdGVBbGwgPSBkZWFjdGl2YXRlQWxsO1xyXG4gICAgICAgIHNlbGYuTG9hZFRvb2xzID0gbG9hZFRvb2xzO1xyXG4gICAgICAgIHNlbGYuTG9hZFVzZXIgPSBsb2FkVXNlcjtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZGVhY3RpdmF0ZUFsbCgpIHtcclxuICAgICAgICAgICAgc2VsZi5BYm91dE1lbnUuQ2xhc3MgPSAnJztcclxuICAgICAgICAgICAgc2VsZi5TZXR0aW5nc01lbnUuQ2xhc3MgPSAnJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRUb29scygkaHR0cCkge1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvUGx1Z2luUGF0aHMnKS5zdWNjZXNzKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuVG9vbHMgPSBhbmd1bGFyLmZyb21Kc29uKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbG9hZFVzZXIoJGh0dHApIHtcclxuICAgICAgICAgICAgJGh0dHAuZ2V0KCcvYXBpL1VzZXInKS5zdWNjZXNzKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuVXNlciA9IGFuZ3VsYXIuZnJvbUpzb24ocmVzdWx0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIE5hdmJhck1lbnUocGF0aCwgdGV4dCkge1xyXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIHNlbGYuSXNBY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICBzZWxmLkNsYXNzID0gJyc7XHJcbiAgICAgICAgc2VsZi5QYXRoID0gcGF0aDtcclxuICAgICAgICBzZWxmLlRleHQgPSB0ZXh0O1xyXG5cclxuICAgICAgICBzZWxmLlNldEFzQWN0aXZlID0gc2V0QXNBY3RpdmU7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNldEFzQWN0aXZlKCkge1xyXG4gICAgICAgICAgICBzZWxmLklzQWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICAgICAgc2VsZi5DbGFzcyA9ICdhY3RpdmUnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ0NvbW1vbicpXHJcbiAgICAgICAgLnZhbHVlKCdCcmVhZGNydW1iU2VydmljZScsIG5ldyBCcmVhZGNydW1iU2VydmljZSgpKTtcclxuXHJcbiAgICBmdW5jdGlvbiBCcmVhZGNydW1iU2VydmljZSgpIHtcclxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICBzZWxmLlJvb3RJdGVtID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHNlbGYuSXNWaXNpYmxlID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHNlbGYuUmVzZXQgPSByZXNldDtcclxuICAgICAgICBzZWxmLkdldEl0ZW1zID0gZ2V0SXRlbXM7XHJcbiAgICAgICAgc2VsZi5BZGROZXcgPSBhZGROZXc7XHJcbiAgICAgICAgc2VsZi5SZW1vdmVMYXN0ID0gcmVtb3ZlTGFzdDtcclxuICAgICAgICBzZWxmLkxhc3RDb250YWlucyA9IGxhc3RDb250YWlucztcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVzZXQoKSB7XHJcbiAgICAgICAgICAgIHNlbGYuUm9vdEl0ZW0gPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgIHNlbGYuSXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRJdGVtcygpIHtcclxuICAgICAgICAgICAgdmFyIGl0ZW1zID0gW107XHJcbiAgICAgICAgICAgIGlmIChzZWxmLlJvb3RJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLlJvb3RJdGVtLkFkZFRvKGl0ZW1zKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gaXRlbXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBhZGROZXcoJGxvY2F0aW9uLCB0ZXh0KSB7XHJcbiAgICAgICAgICAgIHNlbGYuSXNWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgaWYgKHNlbGYuUm9vdEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuUm9vdEl0ZW0uQ2xhc3MgPSAnJztcclxuICAgICAgICAgICAgICAgIHNlbGYuUm9vdEl0ZW0uU2V0TmV4dFdpdGgoJGxvY2F0aW9uLCB0ZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuUm9vdEl0ZW0gPSBuZXcgQnJlYWRjcnVtYkl0ZW0oJGxvY2F0aW9uLCB0ZXh0KTtcclxuICAgICAgICAgICAgICAgIHNlbGYuUm9vdEl0ZW0uQ2xhc3MgPSAnYWN0aXZlJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVtb3ZlTGFzdCgpIHtcclxuICAgICAgICAgICAgaWYgKHNlbGYuUm9vdEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxmLlJvb3RJdGVtLklzTGFzdCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5SZXNldCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5Sb290SXRlbS5SZW1vdmVMYXN0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGxhc3RDb250YWlucyhjb250YWluc1RleHQpIHtcclxuICAgICAgICAgICAgaWYgKHNlbGYuUm9vdEl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLlJvb3RJdGVtLkxhc3RDb250YWlucyhjb250YWluc1RleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIEJyZWFkY3J1bWJJdGVtKCRsb2NhdGlvbiwgdGV4dCkge1xyXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIHNlbGYuTG9jYXRpb24gPSAkbG9jYXRpb24ucGF0aCgpO1xyXG4gICAgICAgIHNlbGYuVGV4dCA9IHRleHQ7XHJcbiAgICAgICAgc2VsZi5OZXh0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHNlbGYuQ2xhc3MgPSAnJztcclxuXHJcbiAgICAgICAgc2VsZi5TZXROZXh0V2l0aCA9IHNldE5leHRXaXRoO1xyXG4gICAgICAgIHNlbGYuQWRkVG8gPSBhZGRUbztcclxuICAgICAgICBzZWxmLklzTGFzdCA9IGlzTGFzdDtcclxuICAgICAgICBzZWxmLlJlbW92ZUxhc3QgPSByZW1vdmVMYXN0O1xyXG4gICAgICAgIHNlbGYuTGFzdENvbnRhaW5zID0gbGFzdENvbnRhaW5zO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXROZXh0V2l0aCgkbG9jYXRpb24sIHRleHQpIHtcclxuICAgICAgICAgICAgaWYgKHNlbGYuTmV4dCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCRsb2NhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuTmV4dC5DbGFzcyA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuTmV4dC5TZXROZXh0V2l0aCgkbG9jYXRpb24sIHRleHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSBpZiAoIXNlbGYuTmV4dC5OZXh0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5DbGFzcyA9ICdhY3RpdmUnO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuTmV4dCA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuTmV4dCA9IG5ldyBCcmVhZGNydW1iSXRlbSgkbG9jYXRpb24sIHRleHQpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi5OZXh0LkNsYXNzID0gJ2FjdGl2ZSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFkZFRvKGl0ZW1zKSB7XHJcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goc2VsZik7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLk5leHQpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuTmV4dC5BZGRUbyhpdGVtcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGlzTGFzdCgpIHtcclxuICAgICAgICAgICAgcmV0dXJuICEoc2VsZi5OZXh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZUxhc3QoKSB7XHJcbiAgICAgICAgICAgIGlmIChzZWxmLk5leHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxmLk5leHQuSXNMYXN0KCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLkNsYXNzID0gJ2FjdGl2ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5OZXh0ID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5OZXh0LlJlbW92ZUxhc3QoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbGFzdENvbnRhaW5zKGNvbnRhaW5zVGV4dCkge1xyXG4gICAgICAgICAgICBpZiAoc2VsZi5Jc0xhc3QoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuVGV4dC5pbmRleE9mKGNvbnRhaW5zVGV4dCkgPiAtMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZWxmLk5leHQuTGFzdENvbnRhaW5zKGNvbnRhaW5zVGV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdDb21tb24nKVxyXG4gICAgICAgIC5zZXJ2aWNlKCdTZXR0aW5nc1NlcnZpY2UnLCBzZXR0aW5nc1NlcnZpY2UpO1xyXG5cclxuICAgIHNldHRpbmdzU2VydmljZS4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckaHR0cCcsXHJcbiAgICAgICAgJyRsb2NhdGlvbicsXHJcbiAgICAgICAgJ05hdmJhclNlcnZpY2UnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNldHRpbmdzU2VydmljZSgkaHR0cCwgJGxvY2F0aW9uLCBuYXZiYXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgc2VsZi5TZXR0aW5ncyA9IFtdO1xyXG5cclxuICAgICAgICBzZWxmLkdldFNldHRpbmdzID0gZ2V0U2V0dGluZ3M7XHJcbiAgICAgICAgc2VsZi5VcGRhdGVTZXR0aW5ncyA9IHVwZGF0ZVNldHRpbmdzO1xyXG4gICAgICAgIHNlbGYuRGVsZXRlU2V0dGluZ3MgPSBkZWxldGVTZXR0aW5ncztcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0U2V0dGluZ3MoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoJy9hcGkvU2V0dGluZ3MnKS5zdWNjZXNzKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuU2V0dGluZ3MgPSBhbmd1bGFyLmZyb21Kc29uKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goc2VsZi5TZXR0aW5ncywgZnVuY3Rpb24gKGVhY2hTZXR0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFlYWNoU2V0dGluZy5WYWx1ZS5QbHVnaW5OYW1lIHx8IGVhY2hTZXR0aW5nLlZhbHVlLlBsdWdpbk5hbWUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzZWxmLk5vblBsdWdpblNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmVQbHVnaW4uU2V0dGluZ3MgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLk5vblBsdWdpblNldHRpbmdzLnB1c2goZWFjaFNldHRpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLkVycm9yID0gcmVzdWx0O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVNldHRpbmdzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9TZXR0aW5ncycsIHNlbGYuU2V0dGluZ3MpLnN1Y2Nlc3MoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgbmF2YmFyU2VydmljZS5VcGRhdGVUb29scygkaHR0cCk7XHJcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycpO1xyXG4gICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLkVycm9yID0gcmVzdWx0O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRlbGV0ZVNldHRpbmdzKHNldHRpbmcpIHtcclxuICAgICAgICAgICAgdmFyIGkgPSBzZWxmLlNldHRpbmdzLmluZGV4T2Yoc2V0dGluZyk7XHJcbiAgICAgICAgICAgIGlmIChpICE9IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLlNldHRpbmdzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ0NvbW1vbicpXHJcbiAgICAgICAgLnNlcnZpY2UoJ1NpbW9uVmVyc2lvblNlcnZpY2UnLCBzaW1vblZlcnNpb25TZXJ2aWNlKTtcclxuXHJcbiAgICBzaW1vblZlcnNpb25TZXJ2aWNlLiRpbmplY3QgPSBbJyRodHRwJ107XHJcblxyXG4gICAgZnVuY3Rpb24gc2ltb25WZXJzaW9uU2VydmljZSgkaHR0cCkge1xyXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcblxyXG4gICAgICAgIHNlbGYuVmVyc2lvbiA9ICcnO1xyXG5cclxuICAgICAgICBzZWxmLkdldFZlcnNpb24gPSBnZXRWZXJzaW9uO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRWZXJzaW9uKCkge1xyXG4gICAgICAgICAgICAkaHR0cC5nZXQoJy9hcGkvU2ltb25WZXJzaW9uLycpLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5WZXJzaW9uID0gcmVzdWx0LkRpc3BsYXlUZXh0O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdDb21tb24nKVxyXG4gICAgICAgIC5zZXJ2aWNlKCdQbHVnaW5zU2VydmljZScsIHBsdWdpbnNTZXJ2aWNlKTtcclxuXHJcbiAgICBwbHVnaW5zU2VydmljZS4kaW5qZWN0ID0gWyckaHR0cCddO1xyXG5cclxuICAgIGZ1bmN0aW9uIHBsdWdpbnNTZXJ2aWNlKCRodHRwKSB7XHJcbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xyXG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgc2VsZi5QbHVnaW5zID0gdW5kZWZpbmVkO1xyXG5cclxuICAgICAgICBzZWxmLkdldFBsdWdpbnMgPSBnZXRQbHVnaW5zO1xyXG4gICAgICAgIHNlbGYuRGVsZXRlU2V0dGluZ3MgPSBkZWxldGVTZXR0aW5ncztcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZ2V0UGx1Z2lucygpIHtcclxuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldCgnL2FwaS9QbHVnaW5zJykuc3VjY2VzcyhmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLlBsdWdpbnMgPSBhbmd1bGFyLmZyb21Kc29uKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZGVsZXRlU2V0dGluZ3Moc2V0dGluZykge1xyXG4gICAgICAgICAgICBhbmd1bGFyLmZvckVhY2goc2VsZi5QbHVnaW5zLCBmdW5jdGlvbiAoZWFjaFBsdWdpbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVhY2hQbHVnaW4uU2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9IGVhY2hQbHVnaW4uU2V0dGluZ3MuaW5kZXhPZihzZXR0aW5nKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlYWNoUGx1Z2luLlNldHRpbmdzLnNwbGljZShpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ0NvbW1vbicpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1BhZ2VIZWFkJywgcGFnZUhlYWQpO1xyXG5cclxuICAgIHBhZ2VIZWFkLiRpbmplY3QgPSBbJ1BhZ2VIZWFkU2VydmljZSddO1xyXG5cclxuICAgIGZ1bmN0aW9uIHBhZ2VIZWFkKHBhZ2VIZWFkU2VydmljZSkge1xyXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLlBhZ2VIZWFkU2VydmljZSA9IHBhZ2VIZWFkU2VydmljZTtcclxuICAgIH1cclxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ0NvbW1vbicpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ05hdmJhcicsIG5hdmJhcik7XHJcblxyXG4gICAgbmF2YmFyLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRodHRwJyxcclxuICAgICAgICAnTmF2YmFyU2VydmljZScsXHJcbiAgICAgICAgJ1NpbW9uVmVyc2lvblNlcnZpY2UnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIG5hdmJhcigkaHR0cCwgbmF2YmFyU2VydmljZSwgc2ltb25WZXJzaW9uU2VydmljZSkge1xyXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLk5hdmJhclNlcnZpY2UgPSBuYXZiYXJTZXJ2aWNlO1xyXG4gICAgICAgIHZtLlNpbW9uVmVyc2lvblNlcnZpY2UgPSBzaW1vblZlcnNpb25TZXJ2aWNlO1xyXG5cclxuICAgICAgICBhY3RpdmF0ZSgpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgICAgICAgbmF2YmFyU2VydmljZS5Mb2FkVG9vbHMoJGh0dHApO1xyXG4gICAgICAgICAgICBuYXZiYXJTZXJ2aWNlLkxvYWRVc2VyKCRodHRwKTtcclxuICAgICAgICAgICAgc2ltb25WZXJzaW9uU2VydmljZS5HZXRWZXJzaW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KGFuZ3VsYXIpKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnQ29tbW9uJylcclxuICAgICAgICAuY29udHJvbGxlcignQnJlYWRjcnVtYicsIGJyZWFkY3J1bWIpO1xyXG5cclxuICAgIGJyZWFkY3J1bWIuJGluamVjdCA9IFsnQnJlYWRjcnVtYlNlcnZpY2UnXTtcclxuXHJcbiAgICBmdW5jdGlvbiBicmVhZGNydW1iKGJyZWFkY3J1bWJTZXJ2aWNlKSB7XHJcbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgdm0uQnJlYWRjcnVtYlNlcnZpY2UgPSBicmVhZGNydW1iU2VydmljZTtcclxuICAgIH1cclxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ0NvbW1vbicpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ1NldHRpbmdzJywgc2V0dGluZ3MpO1xyXG5cclxuICAgIHNldHRpbmdzLiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRsb2NhdGlvbicsXHJcbiAgICAgICAgJ1BhZ2VIZWFkU2VydmljZScsXHJcbiAgICAgICAgJ0JyZWFkY3J1bWJTZXJ2aWNlJyxcclxuICAgICAgICAnTmF2YmFyU2VydmljZScsXHJcbiAgICAgICAgJ1NldHRpbmdzU2VydmljZScsXHJcbiAgICAgICAgJ1BsdWdpbnNTZXJ2aWNlJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBzZXR0aW5ncygkbG9jYXRpb24sIHBhZ2VIZWFkU2VydmljZSwgYnJlYWRjcnVtYlNlcnZpY2UsIG5hdmJhclNlcnZpY2UsIHNldHRpbmdzU2VydmljZSwgcGx1Z2luc1NlcnZpY2UpIHtcclxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICB2bS5FcnJvciA9IHVuZGVmaW5lZDtcclxuICAgICAgICB2bS5QYWdlSGVhZFNlcnZpY2UgPSBwYWdlSGVhZFNlcnZpY2U7XHJcbiAgICAgICAgdm0uQnJlYWRjcnVtYlNlcnZpY2UgPSBicmVhZGNydW1iU2VydmljZTtcclxuICAgICAgICB2bS5OYXZiYXJTZXJ2aWNlID0gbmF2YmFyU2VydmljZTtcclxuICAgICAgICB2bS5TZXR0aW5nc1NlcnZpY2UgPSBzZXR0aW5nc1NlcnZpY2U7XHJcbiAgICAgICAgdm0uUGx1Z2luc1NlcnZpY2UgPSBwbHVnaW5zU2VydmljZTtcclxuXHJcbiAgICAgICAgdm0uRGVsZXRlU2V0dGluZ3MgPSBkZWxldGVTZXR0aW5ncztcclxuXHJcbiAgICAgICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBwYWdlSGVhZFNlcnZpY2UuVGl0bGUgPSBcIkdsb2JhbCBzZXR0aW5nc1wiO1xyXG4gICAgICAgICAgICAgICAgYnJlYWRjcnVtYlNlcnZpY2UuSXNWaXNpYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBuYXZiYXJTZXJ2aWNlLkRlYWN0aXZhdGVBbGwoKTtcclxuICAgICAgICAgICAgICAgIG5hdmJhclNlcnZpY2UuU2V0dGluZ3NNZW51LlNldEFzQWN0aXZlKCk7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5nc1NlcnZpY2UuR2V0U2V0dGluZ3MoKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGx1Z2lucygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdm0uRXJyb3IgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGRlbGV0ZVNldHRpbmdzKHNldHRpbmcpIHtcclxuICAgICAgICAgICAgc2V0dGluZ3NTZXJ2aWNlLkRlbGV0ZVNldHRpbmdzKHNldHRpbmcpO1xyXG4gICAgICAgICAgICBwbHVnaW5zU2VydmljZS5EZWxldGVTZXR0aW5ncyhzZXR0aW5nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVBsdWdpbnMoKSB7XHJcbiAgICAgICAgICAgIHBsdWdpbnNTZXJ2aWNlLkdldFBsdWdpbnMoKVxyXG4gICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2bS5FcnJvciA9IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuc3VjY2VzcyhmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHBsdWdpbnNTZXJ2aWNlLlBsdWdpbnMsIGZ1bmN0aW9uIChvbmVQbHVnaW4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYW5ndWxhci5mb3JFYWNoKHNldHRpbmdzU2VydmljZS5TZXR0aW5ncywgZnVuY3Rpb24gKG9uZVNldHRpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvbmVQbHVnaW4uTmFtZSA9PT0gb25lU2V0dGluZy5WYWx1ZS5QbHVnaW5OYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvbmVQbHVnaW4uU2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25lUGx1Z2luLlNldHRpbmdzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uZVBsdWdpbi5TZXR0aW5ncy5wdXNoKG9uZVNldHRpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufShhbmd1bGFyKSk7IiwiKGZ1bmN0aW9uIChhbmd1bGFyKSB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgYW5ndWxhclxyXG4gICAgICAgIC5tb2R1bGUoJ0NvbW1vbicpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0Fib3V0JywgYWJvdXQpO1xyXG5cclxuICAgIGFib3V0LiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRsb2NhdGlvbicsXHJcbiAgICAgICAgJ1BhZ2VIZWFkU2VydmljZScsXHJcbiAgICAgICAgJ0JyZWFkY3J1bWJTZXJ2aWNlJyxcclxuICAgICAgICAnTmF2YmFyU2VydmljZSdcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gYWJvdXQoJGxvY2F0aW9uLCBwYWdlSGVhZFNlcnZpY2UsIGJyZWFkY3J1bWJTZXJ2aWNlLCBuYXZiYXJTZXJ2aWNlKSB7XHJcbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgdm0uUGFnZUhlYWRTZXJ2aWNlID0gcGFnZUhlYWRTZXJ2aWNlO1xyXG4gICAgICAgIHZtLkJyZWFkY3J1bWJTZXJ2aWNlID0gYnJlYWRjcnVtYlNlcnZpY2U7XHJcbiAgICAgICAgdm0uTmF2YmFyU2VydmljZSA9IG5hdmJhclNlcnZpY2U7XHJcblxyXG4gICAgICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICAgICAgICBwYWdlSGVhZFNlcnZpY2UuVGl0bGUgPSBcIkFib3V0XCI7XHJcbiAgICAgICAgICAgIGJyZWFkY3J1bWJTZXJ2aWNlLklzVmlzaWJsZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBuYXZiYXJTZXJ2aWNlLkRlYWN0aXZhdGVBbGwoKTtcclxuICAgICAgICAgICAgbmF2YmFyU2VydmljZS5BYm91dE1lbnUuU2V0QXNBY3RpdmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdDb21tb24nKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdGb290ZXInLCBmb290ZXIpO1xyXG5cclxuICAgIGZ1bmN0aW9uIGZvb3RlcigpIHtcclxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuXHJcbiAgICAgICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KGFuZ3VsYXIpKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnUHJvamVjdHMnKVxyXG4gICAgICAgIC5zZXJ2aWNlKCdQcm9qZWN0c1NlcnZpY2UnLCBwcm9qZWN0c1NlcnZpY2UpO1xyXG5cclxuICAgIHByb2plY3RzU2VydmljZS4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckaHR0cCcsXHJcbiAgICAgICAgJyRsb2NhdGlvbicsXHJcbiAgICAgICAgJ0JyZWFkY3J1bWJTZXJ2aWNlJ1xyXG4gICAgXTtcclxuXHJcbiAgICBmdW5jdGlvbiBwcm9qZWN0c1NlcnZpY2UoJGh0dHAsICRsb2NhdGlvbiwgYnJlYWRjcnVtYlNlcnZpY2UpIHtcclxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICBzZWxmLlByb2plY3RzID0gW107XHJcbiAgICAgICAgc2VsZi5FcnJvciA9IHVuZGVmaW5lZDtcclxuICAgICAgICBzZWxmLlNlbGVjdGVkUHJvamVjdCA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICAgICAgc2VsZi5HZXRQcm9qZWN0cyA9IGdldFByb2plY3RzO1xyXG4gICAgICAgIHNlbGYuR2V0UHJvamVjdERldGFpbHMgPSBnZXRQcm9qZWN0RGV0YWlscztcclxuICAgICAgICBzZWxmLkFkZFByb2plY3QgPSBhZGRQcm9qZWN0O1xyXG4gICAgICAgIHNlbGYuVXBkYXRlUHJvamVjdCA9IHVwZGF0ZVByb2plY3Q7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFByb2plY3RzKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3Byb2plY3RzJykuc3VjY2VzcyhmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLlByb2plY3RzID0gYW5ndWxhci5mcm9tSnNvbihyZXN1bHQpO1xyXG4gICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLkVycm9yID0gcmVzdWx0O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGdldFByb2plY3REZXRhaWxzKHByb2plY3RJZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAuZ2V0KCcvYXBpL3Byb2plY3RzLycgKyBwcm9qZWN0SWQpLnN1Y2Nlc3MoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5TZWxlY3RlZFByb2plY3QgPSBhbmd1bGFyLmZyb21Kc29uKHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH0pLmVycm9yKGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuRXJyb3IgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkUHJvamVjdChuZXdQcm9qZWN0RGV0YWlscykge1xyXG4gICAgICAgICAgICByZXR1cm4gJGh0dHAucG9zdCgnL2FwaS9wcm9qZWN0cy8nLCBuZXdQcm9qZWN0RGV0YWlscykuc3VjY2VzcyhmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBicmVhZGNydW1iU2VydmljZS5SZW1vdmVMYXN0KCk7XHJcbiAgICAgICAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnLycgKyByZXN1bHQuSWQpO1xyXG4gICAgICAgICAgICB9KS5lcnJvcihmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLkVycm9yID0gcmVzdWx0O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHVwZGF0ZVByb2plY3QoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5wb3N0KCcvYXBpL3Byb2plY3RzLycsIHNlbGYuU2VsZWN0ZWRQcm9qZWN0KS5zdWNjZXNzKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGJyZWFkY3J1bWJTZXJ2aWNlLlJlbW92ZUxhc3QoKTtcclxuICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyArIHNlbGYuU2VsZWN0ZWRQcm9qZWN0LklkKTtcclxuICAgICAgICAgICAgfSkuZXJyb3IoZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgc2VsZi5FcnJvciA9IHJlc3VsdDtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KGFuZ3VsYXIpKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnUHJvamVjdHMnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdQcm9qZWN0cycsIHByb2plY3RzKTtcclxuXHJcbiAgICBwcm9qZWN0cy4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckbG9jYXRpb24nLFxyXG4gICAgICAgICdQYWdlSGVhZFNlcnZpY2UnLFxyXG4gICAgICAgICdOYXZiYXJTZXJ2aWNlJyxcclxuICAgICAgICAnQnJlYWRjcnVtYlNlcnZpY2UnLFxyXG4gICAgICAgICdQcm9qZWN0c1NlcnZpY2UnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIHByb2plY3RzKCRsb2NhdGlvbiwgcGFnZUhlYWRTZXJ2aWNlLCBuYXZiYXJTZXJ2aWNlLCBicmVhZGNydW1iU2VydmljZSwgcHJvamVjdHNTZXJ2aWNlKSB7XHJcbiAgICAgICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xyXG4gICAgICAgIHZhciB2bSA9IHRoaXM7XHJcbiAgICAgICAgdm0uUHJvamVjdHNTZXJ2aWNlID0gcHJvamVjdHNTZXJ2aWNlO1xyXG5cclxuICAgICAgICBhY3RpdmF0ZSgpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcclxuICAgICAgICAgICAgcGFnZUhlYWRTZXJ2aWNlLlRpdGxlID0gJ0hvbWUnO1xyXG4gICAgICAgICAgICBuYXZiYXJTZXJ2aWNlLkRlYWN0aXZhdGVBbGwoKTtcclxuICAgICAgICAgICAgcHJvamVjdHNTZXJ2aWNlLkdldFByb2plY3RzKCkuc3VjY2VzcyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBicmVhZGNydW1iU2VydmljZS5SZXNldCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWRjcnVtYlNlcnZpY2UuQWRkTmV3KCRsb2NhdGlvbiwgcGFnZUhlYWRTZXJ2aWNlLlRpdGxlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KGFuZ3VsYXIpKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnUHJvamVjdHMnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdOZXdQcm9qZWN0JywgbmV3UHJvamVjdCk7XHJcblxyXG4gICAgbmV3UHJvamVjdC4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckbG9jYXRpb24nLFxyXG4gICAgICAgICckcm91dGVQYXJhbXMnLFxyXG4gICAgICAgICdQYWdlSGVhZFNlcnZpY2UnLFxyXG4gICAgICAgICdOYXZiYXJTZXJ2aWNlJyxcclxuICAgICAgICAnQnJlYWRjcnVtYlNlcnZpY2UnLFxyXG4gICAgICAgICdQcm9qZWN0c1NlcnZpY2UnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIG5ld1Byb2plY3QoJGxvY2F0aW9uLCAkcm91dGVQYXJhbXMsIHBhZ2VIZWFkU2VydmljZSwgbmF2YmFyU2VydmljZSwgYnJlYWRjcnVtYlNlcnZpY2UsIHByb2plY3RzU2VydmljZSkge1xyXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLlByb2plY3RzU2VydmljZSA9IHByb2plY3RzU2VydmljZTtcclxuICAgICAgICB2bS5OZXdQcm9qZWN0RGV0YWlscyA9IHtcclxuICAgICAgICAgICAgTmFtZTogJycsXHJcbiAgICAgICAgICAgIERlc2NyaXB0aW9uOiAnJ1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICAgICAgICBwYWdlSGVhZFNlcnZpY2UuVGl0bGUgPSAnQWRkIE5ldyBQcm9qZWN0JztcclxuICAgICAgICAgICAgbmF2YmFyU2VydmljZS5EZWFjdGl2YXRlQWxsKCk7XHJcbiAgICAgICAgICAgIGJyZWFkY3J1bWJTZXJ2aWNlLkFkZE5ldygkbG9jYXRpb24sIHBhZ2VIZWFkU2VydmljZS5UaXRsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KGFuZ3VsYXIpKTsiLCIoZnVuY3Rpb24gKGFuZ3VsYXIpIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBhbmd1bGFyXHJcbiAgICAgICAgLm1vZHVsZSgnUHJvamVjdHMnKVxyXG4gICAgICAgIC5jb250cm9sbGVyKCdQcm9qZWN0RGV0YWlscycsIHByb2plY3REZXRhaWxzKTtcclxuXHJcbiAgICBwcm9qZWN0RGV0YWlscy4kaW5qZWN0ID0gW1xyXG4gICAgICAgICckbG9jYXRpb24nLFxyXG4gICAgICAgICckcm91dGVQYXJhbXMnLFxyXG4gICAgICAgICdQYWdlSGVhZFNlcnZpY2UnLFxyXG4gICAgICAgICdOYXZiYXJTZXJ2aWNlJyxcclxuICAgICAgICAnQnJlYWRjcnVtYlNlcnZpY2UnLFxyXG4gICAgICAgICdQcm9qZWN0c1NlcnZpY2UnXHJcbiAgICBdO1xyXG5cclxuICAgIGZ1bmN0aW9uIHByb2plY3REZXRhaWxzKCRsb2NhdGlvbiwgJHJvdXRlUGFyYW1zLCBwYWdlSGVhZFNlcnZpY2UsIG5hdmJhclNlcnZpY2UsIGJyZWFkY3J1bWJTZXJ2aWNlLCBwcm9qZWN0c1NlcnZpY2UpIHtcclxuICAgICAgICAvKiBqc2hpbnQgdmFsaWR0aGlzOiB0cnVlICovXHJcbiAgICAgICAgdmFyIHZtID0gdGhpcztcclxuICAgICAgICB2bS5Qcm9qZWN0c1NlcnZpY2UgPSBwcm9qZWN0c1NlcnZpY2U7XHJcblxyXG4gICAgICAgIGFjdGl2YXRlKCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xyXG4gICAgICAgICAgICBuYXZiYXJTZXJ2aWNlLkRlYWN0aXZhdGVBbGwoKTtcclxuICAgICAgICAgICAgcHJvamVjdHNTZXJ2aWNlLkdldFByb2plY3REZXRhaWxzKCRyb3V0ZVBhcmFtcy5Qcm9qZWN0SWQpLnN1Y2Nlc3MoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcGFnZUhlYWRTZXJ2aWNlLlRpdGxlID0gcHJvamVjdHNTZXJ2aWNlLlNlbGVjdGVkUHJvamVjdC5OYW1lO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChicmVhZGNydW1iU2VydmljZS5MYXN0Q29udGFpbnMoJ0VkaXQgJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhZGNydW1iU2VydmljZS5SZW1vdmVMYXN0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhZGNydW1iU2VydmljZS5BZGROZXcoJGxvY2F0aW9uLCBwYWdlSGVhZFNlcnZpY2UuVGl0bGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0oYW5ndWxhcikpOyIsIihmdW5jdGlvbiAoYW5ndWxhcikge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGFuZ3VsYXJcclxuICAgICAgICAubW9kdWxlKCdQcm9qZWN0cycpXHJcbiAgICAgICAgLmNvbnRyb2xsZXIoJ0VkaXRQcm9qZWN0JywgZWRpdFByb2plY3QpO1xyXG5cclxuICAgIGVkaXRQcm9qZWN0LiRpbmplY3QgPSBbXHJcbiAgICAgICAgJyRsb2NhdGlvbicsXHJcbiAgICAgICAgJyRyb3V0ZVBhcmFtcycsXHJcbiAgICAgICAgJ1BhZ2VIZWFkU2VydmljZScsXHJcbiAgICAgICAgJ05hdmJhclNlcnZpY2UnLFxyXG4gICAgICAgICdCcmVhZGNydW1iU2VydmljZScsXHJcbiAgICAgICAgJ1Byb2plY3RzU2VydmljZSdcclxuICAgIF07XHJcblxyXG4gICAgZnVuY3Rpb24gZWRpdFByb2plY3QoJGxvY2F0aW9uLCAkcm91dGVQYXJhbXMsIHBhZ2VIZWFkU2VydmljZSwgbmF2YmFyU2VydmljZSwgYnJlYWRjcnVtYlNlcnZpY2UsIHByb2plY3RzU2VydmljZSkge1xyXG4gICAgICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cclxuICAgICAgICB2YXIgdm0gPSB0aGlzO1xyXG4gICAgICAgIHZtLlByb2plY3RzU2VydmljZSA9IHByb2plY3RzU2VydmljZTtcclxuXHJcbiAgICAgICAgYWN0aXZhdGUoKTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XHJcbiAgICAgICAgICAgIG5hdmJhclNlcnZpY2UuRGVhY3RpdmF0ZUFsbCgpO1xyXG4gICAgICAgICAgICBwcm9qZWN0c1NlcnZpY2UuR2V0UHJvamVjdERldGFpbHMoJHJvdXRlUGFyYW1zLlByb2plY3RJZCkuc3VjY2VzcyhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBwYWdlSGVhZFNlcnZpY2UuVGl0bGUgPSAnRWRpdCAnICsgcHJvamVjdHNTZXJ2aWNlLlNlbGVjdGVkUHJvamVjdC5OYW1lO1xyXG4gICAgICAgICAgICAgICAgYnJlYWRjcnVtYlNlcnZpY2UuUmVtb3ZlTGFzdCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWRjcnVtYlNlcnZpY2UuQWRkTmV3KCRsb2NhdGlvbiwgcGFnZUhlYWRTZXJ2aWNlLlRpdGxlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59KGFuZ3VsYXIpKTsiXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=